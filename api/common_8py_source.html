<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>grepros: grepros/common.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">grepros<span id="projectnumber">&#160;1.1.0</span>
   </div>
   <div id="projectbrief">grep for ROS bag files and live topics</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('common_8py_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">common.py</div></div>
</div><!--header-->
<div class="contents">
<a href="common_8py.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html">    1</a></span><span class="comment"># -*- coding: utf-8 -*-</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="stringliteral">Common utilities.</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="stringliteral">------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="stringliteral">This file is part of grepros - grep for ROS1 bag files and live topics.</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="stringliteral">Released under the BSD License.</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="stringliteral">@author      Erki Suurjaak</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="stringliteral"></span><span class="preprocessor">@created</span>     23.10.2021</div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">@modified</span>    28.12.2023</div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span>------------------------------------------------------------------------------</div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="stringliteral">## @namespace grepros.common</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="stringliteral">from __future__ import print_function</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="stringliteral">import argparse</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="stringliteral">import copy</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="stringliteral">import datetime</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="stringliteral">import functools</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="stringliteral">import glob</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="stringliteral">import importlib</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="stringliteral">import inspect</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="stringliteral">import io</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="stringliteral">import itertools</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="stringliteral">import logging</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="stringliteral">import math</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="stringliteral">import os</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="stringliteral">import re</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="stringliteral">import shutil</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="stringliteral">import sys</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="stringliteral">import threading</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="stringliteral">import time</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="stringliteral">try: import curses</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="stringliteral">except ImportError: curses = None</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="stringliteral">import six</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="stringliteral">try: import zstandard</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="stringliteral">except ImportError: zstandard = None</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="stringliteral">## Python types for filesystem paths</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#a207c5369a045195bd6b5d3f3e31d7375">   42</a></span><span class="stringliteral">PATH_TYPES = (six.binary_type, six.text_type)</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="stringliteral">if six.PY34: PATH_TYPES += (importlib.import_module(&quot;pathlib&quot;).Path, )</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="stringliteral">## Python types for both byte strings and text strings</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#a07fcd47c08404c396bc4a524afaf4756">   45</a></span><span class="stringliteral">STRING_TYPES = (six.binary_type, six.text_type)</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="stringliteral">## Python types for text strings</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#ab5e6fe5599a14c0fd68224c5335d287b">   47</a></span><span class="stringliteral">TEXT_TYPES = (six.binary_type, six.text_type) if six.PY2 else (six.text_type, )</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_match_markers.html">   50</a></span><span class="stringliteral">class MatchMarkers(object):</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="stringliteral">    &quot;&quot;&quot;Highlight markers for matches in message values.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span> </div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    </div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_match_markers.html#aa03ec9e8f97678078b4d437c64e3fb5b">   54</a></span>    ID    = <span class="stringliteral">&quot;matching&quot;</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    </div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_match_markers.html#a9d6ae4aa12ba127d1ad814275261b73a">   56</a></span>    START = <span class="stringliteral">&quot;&lt;%s&gt;&quot;</span>  % ID</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    </div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_match_markers.html#a648c23d4531ddc629af00dc755579355">   58</a></span>    END   = <span class="stringliteral">&quot;&lt;/%s&gt;&quot;</span> % ID</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>    </div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_match_markers.html#afa50c7300879b68f4210f64860a5d7ac">   60</a></span>    EMPTY = START + END</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>    </div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_match_markers.html#a3b63cffef80bfd731814abe0721cf0e7">   62</a></span>    EMPTY_REPL = <span class="stringliteral">&quot;%s&#39;&#39;%s&quot;</span> % (START, END)</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span> </div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>    <span class="preprocessor">@classmethod</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_match_markers.html#a35f48ceb7c93c466ded66a98c2e4e425">   65</a></span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_match_markers.html#a35f48ceb7c93c466ded66a98c2e4e425">populate</a>(cls, value):</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>        <span class="stringliteral">&quot;&quot;&quot;Populates highlight markers with specified value.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_match_markers.html#a094c367727273b4da2b960ca3b3edc06">   67</a></span>        cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_match_markers.html#aa03ec9e8f97678078b4d437c64e3fb5b">ID</a><a class="code hl_variable" href="classgrepros_1_1common_1_1_match_markers.html#a094c367727273b4da2b960ca3b3edc06">ID</a>    = str(value)</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_match_markers.html#ac169e9ffa53b0e66f7f30d192d44643f">   68</a></span>        cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_match_markers.html#a9d6ae4aa12ba127d1ad814275261b73a">START</a><a class="code hl_variable" href="classgrepros_1_1common_1_1_match_markers.html#ac169e9ffa53b0e66f7f30d192d44643f">START</a> = <span class="stringliteral">&quot;&lt;%s&gt;&quot;</span>  % cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_match_markers.html#aa03ec9e8f97678078b4d437c64e3fb5b">ID</a><a class="code hl_variable" href="classgrepros_1_1common_1_1_match_markers.html#a094c367727273b4da2b960ca3b3edc06">ID</a></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_match_markers.html#a1de54bd922161dd5c6a353647f448fd6">   69</a></span>        cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_match_markers.html#a648c23d4531ddc629af00dc755579355">END</a><a class="code hl_variable" href="classgrepros_1_1common_1_1_match_markers.html#a1de54bd922161dd5c6a353647f448fd6">END</a>   = <span class="stringliteral">&quot;&lt;/%s&gt;&quot;</span> % cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_match_markers.html#aa03ec9e8f97678078b4d437c64e3fb5b">ID</a><a class="code hl_variable" href="classgrepros_1_1common_1_1_match_markers.html#a094c367727273b4da2b960ca3b3edc06">ID</a></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_match_markers.html#ac9e0e727bf7b731b564e00f4bddf25af">   70</a></span>        cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_match_markers.html#afa50c7300879b68f4210f64860a5d7ac">EMPTY</a><a class="code hl_variable" href="classgrepros_1_1common_1_1_match_markers.html#ac9e0e727bf7b731b564e00f4bddf25af">EMPTY</a> = cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_match_markers.html#a9d6ae4aa12ba127d1ad814275261b73a">START</a><a class="code hl_variable" href="classgrepros_1_1common_1_1_match_markers.html#ac169e9ffa53b0e66f7f30d192d44643f">START</a> + cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_match_markers.html#a648c23d4531ddc629af00dc755579355">END</a><a class="code hl_variable" href="classgrepros_1_1common_1_1_match_markers.html#a1de54bd922161dd5c6a353647f448fd6">END</a></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_match_markers.html#a787b7e288ebd1289629ef4c83517ee39">   71</a></span>        cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_match_markers.html#a3b63cffef80bfd731814abe0721cf0e7">EMPTY_REPL</a><a class="code hl_variable" href="classgrepros_1_1common_1_1_match_markers.html#a787b7e288ebd1289629ef4c83517ee39">EMPTY_REPL</a> = <span class="stringliteral">&quot;%s&#39;&#39;%s&quot;</span> % (cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_match_markers.html#a9d6ae4aa12ba127d1ad814275261b73a">START</a><a class="code hl_variable" href="classgrepros_1_1common_1_1_match_markers.html#ac169e9ffa53b0e66f7f30d192d44643f">START</a>, cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_match_markers.html#a648c23d4531ddc629af00dc755579355">END</a><a class="code hl_variable" href="classgrepros_1_1common_1_1_match_markers.html#a1de54bd922161dd5c6a353647f448fd6">END</a>)</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span> </div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span> </div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span> </div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span><span class="keyword">class </span><a class="code hl_class" href="classgrepros_1_1common_1_1_console_printer.html">ConsolePrinter</a>(object):</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span><span class="stringliteral">    Prints to console, supports color output.</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span><span class="stringliteral">    If configured </span><span class="keyword">with</span> `apimode=<span class="keyword">True</span>`, logs debugs <span class="keywordflow">and</span> warnings to logger <span class="keywordflow">and</span> raises errors.</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html">   80</a></span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#ab9d36912fe65b0eb00cc00c96d4a0e85">   82</a></span><span class="stringliteral">    STYLE_RESET     = &quot;\x1b(B\x1b[m&quot;</span>            <span class="comment"># Default color+weight</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#a9d90add31e4e03a4b9f3d4eee11a747b">   83</a></span>    STYLE_HIGHLIGHT = <span class="stringliteral">&quot;\x1b[31m&quot;</span>                <span class="comment"># Red</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#a80879433c00d805bd7a5e734d0eda64f">   84</a></span>    STYLE_LOWLIGHT  = <span class="stringliteral">&quot;\x1b[38;2;105;105;105m&quot;</span>  <span class="comment"># Dim gray</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#a1433e0c99dff85f7dba479edc2880f4b">   85</a></span>    STYLE_SPECIAL   = <span class="stringliteral">&quot;\x1b[35m&quot;</span>                <span class="comment"># Purple</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#a9bd59f856304e5a3c5f0deee46320c7a">   86</a></span>    STYLE_SPECIAL2  = <span class="stringliteral">&quot;\x1b[36m&quot;</span>                <span class="comment"># Cyan</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#adcc3aebd8951a12f172e00c5ade27498">   87</a></span>    STYLE_WARN      = <span class="stringliteral">&quot;\x1b[33m&quot;</span>                <span class="comment"># Yellow</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#adaa6ad01d1fa3ac83ba828b283f1264b">   88</a></span>    STYLE_ERROR     = <span class="stringliteral">&quot;\x1b[31m\x1b[2m&quot;</span>         <span class="comment"># Dim red</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span> </div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#a70034fa7a4a0f7912242988a590a85cb">   90</a></span>    DEBUG_START, DEBUG_END = STYLE_LOWLIGHT, STYLE_RESET  <span class="comment"># Metainfo wrappers</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#a020554d0db454919368e7f18bee125f8">   91</a></span>    WARN_START,  WARN_END =  STYLE_WARN,     STYLE_RESET  <span class="comment"># Warning message wrappers</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#aeffdcb40de1409c8869d68032c86b904">   92</a></span>    ERROR_START, ERROR_END = STYLE_ERROR,    STYLE_RESET  <span class="comment"># Error message wrappers</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span> </div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>    </div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#af90824509586333cf45ce757d2711ce3">   95</a></span>    COLOR = <span class="keywordtype">None</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span> </div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    </div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#a59c3bba4b17cd5e19f149ea175fa6989">   98</a></span>    WIDTH = 80</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span> </div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>    </div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#ab070f2ed5116c63d583953d2358733bc">  101</a></span>    PRINTS = {}</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span> </div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    </div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#a061947498e8c2d601576f6e6f42fd7a0">  104</a></span>    APIMODE = <span class="keyword">False</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span> </div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    _COLORFLAG = <span class="keywordtype">None</span>  </div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span> </div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    _LINEOPEN = <span class="keyword">False</span>  </div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span> </div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    _UNIQUES = set()   </div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span> </div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    <span class="preprocessor">@classmethod</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html#a8762b19cf14909c797ff5a53c2231a2b">configure</a>(cls, color=True, apimode=False):</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span><span class="stringliteral">        Initializes printer, </span><span class="keywordflow">for</span> terminal output <span class="keywordflow">or</span> library mode.</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span> </div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>        For terminal output, initializes terminal colors, <span class="keywordflow">or</span> disables colors <span class="keywordflow">if</span> unsupported.</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span> </div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>        <span class="preprocessor">@param</span>   color    <span class="keyword">True</span> / <span class="keyword">False</span> / <span class="keywordtype">None</span> <span class="keywordflow">for</span> auto-detect <span class="keyword">from</span> TTY support;</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>                          will be disabled <span class="keywordflow">if</span> terminal does <span class="keywordflow">not</span> support colors</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>        <span class="preprocessor">@param</span>   apimode  whether to log debugs <span class="keywordflow">and</span> warnings to logger <span class="keywordflow">and</span> <span class="keywordflow">raise</span> errors,</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>                          instead of printing</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span><span class="stringliteral">        cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a061947498e8c2d601576f6e6f42fd7a0">APIMODE</a><a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a6fb8f7d0264e65add27c66547a3c5419">APIMODE</a>    = bool(apimode)</span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span><span class="stringliteral">        cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html">_COLORFLAG</a> = color</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span><span class="stringliteral">        </span><span class="keywordflow">if</span> apimode:</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>            cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a9bd93596caa75c86e7fa423f02ab1a6c">DEBUG_START</a>, cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a70034fa7a4a0f7912242988a590a85cb">DEBUG_END</a> = <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>            cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a21ead9564c18f7a6afd439a5660e0526">WARN_START</a>,  cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a020554d0db454919368e7f18bee125f8">WARN_END</a>  = <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>            cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#adadd930a96f7396162da394dd8c0afe5">ERROR_START</a>, cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#aeffdcb40de1409c8869d68032c86b904">ERROR_END</a> = <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>        <span class="keywordflow">else</span>: cls.<a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html#a69a6908a92eb926c5a76317297c34990">init_terminal</a>()</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#a8762b19cf14909c797ff5a53c2231a2b">  131</a></span> </div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#a6fb8f7d0264e65add27c66547a3c5419">  132</a></span> </div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    <span class="preprocessor">@classmethod</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html#a69a6908a92eb926c5a76317297c34990">init_terminal</a>(cls):</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>        <span class="stringliteral">&quot;&quot;&quot;Initializes terminal for color output, or disables color output if unsupported.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>        <span class="keywordflow">if</span> cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#af90824509586333cf45ce757d2711ce3">COLOR</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>: <span class="keywordflow">return</span></div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span> </div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>        <span class="keywordflow">try</span>: cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a59c3bba4b17cd5e19f149ea175fa6989">WIDTH</a><a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a76a791c70caa47f85044264f1468131a">WIDTH</a> = shutil.get_terminal_size().columns  <span class="comment"># Py3</span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>        <span class="keywordflow">except</span> Exception: <span class="keywordflow">pass</span>  <span class="comment"># Py2</span></div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>        cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#af90824509586333cf45ce757d2711ce3">COLOR</a> = (cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html">_COLORFLAG</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keyword">False</span>)</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#a69a6908a92eb926c5a76317297c34990">  142</a></span>            curses.setupterm()</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>            <span class="keywordflow">if</span> cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#af90824509586333cf45ce757d2711ce3">COLOR</a> <span class="keywordflow">and</span> <span class="keywordflow">not</span> sys.stdout.isatty():</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>                <span class="keywordflow">raise</span> <a class="code hl_class" href="class_exception.html">Exception</a>()</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#a76a791c70caa47f85044264f1468131a">  146</a></span>            cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#af90824509586333cf45ce757d2711ce3">COLOR</a> = bool(cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html">_COLORFLAG</a>)</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>            <span class="keywordflow">if</span> sys.stdout.isatty() <span class="keywordflow">or</span> cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#af90824509586333cf45ce757d2711ce3">COLOR</a>:</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>                cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a59c3bba4b17cd5e19f149ea175fa6989">WIDTH</a><a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a76a791c70caa47f85044264f1468131a">WIDTH</a> = curses.initscr().getmaxyx()[1]</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>            curses.endwin()</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>        <span class="keywordflow">except</span> Exception: <span class="keywordflow">pass</span></div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span> </div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>        <span class="keywordflow">if</span> cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#af90824509586333cf45ce757d2711ce3">COLOR</a>:</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>            cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a9bd93596caa75c86e7fa423f02ab1a6c">DEBUG_START</a>, cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a70034fa7a4a0f7912242988a590a85cb">DEBUG_END</a> = cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a80879433c00d805bd7a5e734d0eda64f">STYLE_LOWLIGHT</a>, cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#ab9d36912fe65b0eb00cc00c96d4a0e85">STYLE_RESET</a></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>            cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a21ead9564c18f7a6afd439a5660e0526">WARN_START</a>,  cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a020554d0db454919368e7f18bee125f8">WARN_END</a>  = cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#adcc3aebd8951a12f172e00c5ade27498">STYLE_WARN</a>,     cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#ab9d36912fe65b0eb00cc00c96d4a0e85">STYLE_RESET</a></div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>            cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#adadd930a96f7396162da394dd8c0afe5">ERROR_START</a>, cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#aeffdcb40de1409c8869d68032c86b904">ERROR_END</a> = cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#adaa6ad01d1fa3ac83ba828b283f1264b">STYLE_ERROR</a>,    cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#ab9d36912fe65b0eb00cc00c96d4a0e85">STYLE_RESET</a></div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>            cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a9bd93596caa75c86e7fa423f02ab1a6c">DEBUG_START</a>, cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a70034fa7a4a0f7912242988a590a85cb">DEBUG_END</a> = <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>            cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a21ead9564c18f7a6afd439a5660e0526">WARN_START</a>,  cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a020554d0db454919368e7f18bee125f8">WARN_END</a>  = <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>            cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#adadd930a96f7396162da394dd8c0afe5">ERROR_START</a>, cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#aeffdcb40de1409c8869d68032c86b904">ERROR_END</a> = <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span> </div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span> </div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    <span class="preprocessor">@classmethod</span></div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html#a00415f3a62290d9bb13c596a9ae60a94">print</a>(cls, text=&quot;&quot;, *args, **kwargs):</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span><span class="stringliteral">        Prints text, formatted </span><span class="keyword">with</span> args <span class="keywordflow">and</span> kwargs.</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span> </div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>        <span class="preprocessor">@param</span>   __file   file object to <span class="keywordflow">print</span> to <span class="keywordflow">if</span> <span class="keywordflow">not</span> sys.stdout</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>        <span class="preprocessor">@param</span>   __end    line end to use <span class="keywordflow">if</span> <span class="keywordflow">not</span> linefeed <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>        <span class="preprocessor">@param</span>   __once   whether text should be printed only once</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>                          <span class="keywordflow">and</span> discarded on any further calls (applies to unformatted text)</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span><span class="stringliteral">        text = str(text)</span></div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span><span class="stringliteral">        </span><span class="keywordflow">if</span> kwargs.pop(<span class="stringliteral">&quot;__once&quot;</span>, <span class="keyword">False</span>):</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>            <span class="keywordflow">if</span> text <span class="keywordflow">in</span> cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html">_UNIQUES</a>: <span class="keywordflow">return</span></div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>            cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html">_UNIQUES</a>.add(text)</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>        fileobj, end = kwargs.pop(<span class="stringliteral">&quot;__file&quot;</span>, sys.stdout), kwargs.pop(<span class="stringliteral">&quot;__end&quot;</span>, <span class="stringliteral">&quot;\n&quot;</span>)</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>        pref, suff = kwargs.pop(<span class="stringliteral">&quot;__prefix&quot;</span>, <span class="stringliteral">&quot;&quot;</span>), kwargs.pop(<span class="stringliteral">&quot;__suffix&quot;</span>, <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#a00415f3a62290d9bb13c596a9ae60a94">  179</a></span>        <span class="keywordflow">if</span> cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html">_LINEOPEN</a><a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html">_LINEOPEN</a> <span class="keywordflow">and</span> <span class="stringliteral">&quot;\n&quot;</span> <span class="keywordflow">in</span> end: pref = <span class="stringliteral">&quot;\n&quot;</span> + pref  <span class="comment"># Add linefeed to end open line</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>        text = cls.<a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html">_format</a>(text, *args, **kwargs)</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span> </div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>        cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#ab070f2ed5116c63d583953d2358733bc">PRINTS</a>[fileobj] = cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#ab070f2ed5116c63d583953d2358733bc">PRINTS</a>.get(fileobj, 0) + 1</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>        cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html">_LINEOPEN</a><a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html">_LINEOPEN</a> = <span class="stringliteral">&quot;\n&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> end</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>        cls.<a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html#a69a6908a92eb926c5a76317297c34990">init_terminal</a>()</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>        <a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html#a00415f3a62290d9bb13c596a9ae60a94">print</a>(pref + text + suff, end=end, file=fileobj)</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>        <span class="keywordflow">not</span> fileobj.isatty() <span class="keywordflow">and</span> fileobj.flush()</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span> </div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span> </div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    <span class="preprocessor">@classmethod</span></div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html#a67b5708431eee5a8c4aed6350ca1dbfc">error</a>(cls, text=&quot;&quot;, *args, **kwargs):</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span><span class="stringliteral">        Prints error to stderr, formatted </span><span class="keyword">with</span> args <span class="keywordflow">and</span> kwargs, <span class="keywordflow">in</span> error colors <span class="keywordflow">if</span> supported.</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span> </div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>        Raises exception instead <span class="keywordflow">if</span> APIMODE.</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span><span class="stringliteral">        </span><span class="keywordflow">if</span> cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a061947498e8c2d601576f6e6f42fd7a0">APIMODE</a><a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a6fb8f7d0264e65add27c66547a3c5419">APIMODE</a>:</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>            <span class="keywordflow">raise</span> <a class="code hl_class" href="class_exception.html">Exception</a>(cls.<a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html">_format</a>(text, *args, __once=<span class="keyword">False</span>, **kwargs))</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>        KWS = dict(__file=sys.stderr, __prefix=cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#adadd930a96f7396162da394dd8c0afe5">ERROR_START</a>, __suffix=cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#aeffdcb40de1409c8869d68032c86b904">ERROR_END</a>)</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>        cls.<a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html#a00415f3a62290d9bb13c596a9ae60a94">print</a>(text, *args, **dict(kwargs, **KWS))</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span> </div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span> </div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#a67b5708431eee5a8c4aed6350ca1dbfc">  202</a></span>    <span class="preprocessor">@classmethod</span></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html#ac2fb90faceda1d8dfe3713c829d37cd7">warn</a>(cls, text=&quot;&quot;, *args, **kwargs):</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span><span class="stringliteral">        Prints warning to stderr, </span><span class="keywordflow">or</span> logs to logger <span class="keywordflow">if</span> APIMODE.</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span> </div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>        Text <span class="keywordflow">is</span> formatted <span class="keyword">with</span> args <span class="keywordflow">and</span> kwargs, <span class="keywordflow">in</span> warning colors <span class="keywordflow">if</span> supported.</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span><span class="stringliteral">        </span><span class="keywordflow">if</span> cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a061947498e8c2d601576f6e6f42fd7a0">APIMODE</a><a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a6fb8f7d0264e65add27c66547a3c5419">APIMODE</a>:</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>            text = cls.<a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html">_format</a>(text, *args, **kwargs)</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>            <span class="keywordflow">if</span> text: logging.getLogger(__name__).warning(text)</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>            <span class="keywordflow">return</span></div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>        KWS = dict(__file=sys.stderr, __prefix=cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a21ead9564c18f7a6afd439a5660e0526">WARN_START</a>, __suffix=cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a020554d0db454919368e7f18bee125f8">WARN_END</a>)</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>        cls.<a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html#a00415f3a62290d9bb13c596a9ae60a94">print</a>(text, *args, **dict(kwargs, **KWS))</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#ac2fb90faceda1d8dfe3713c829d37cd7">  215</a></span> </div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span> </div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>    <span class="preprocessor">@classmethod</span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html#a6a2898a82918f046e95c384f0a302d93">debug</a>(cls, text=&quot;&quot;, *args, **kwargs):</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span><span class="stringliteral">        Prints debug text to stderr, </span><span class="keywordflow">or</span> logs to logger <span class="keywordflow">if</span> APIMODE.</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span> </div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>        Text <span class="keywordflow">is</span> formatted <span class="keyword">with</span> args <span class="keywordflow">and</span> kwargs, <span class="keywordflow">in</span> warning colors <span class="keywordflow">if</span> supported.</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span><span class="stringliteral">        </span><span class="keywordflow">if</span> cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a061947498e8c2d601576f6e6f42fd7a0">APIMODE</a><a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a6fb8f7d0264e65add27c66547a3c5419">APIMODE</a>:</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>            text = cls.<a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html">_format</a>(text, *args, **kwargs)</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>            <span class="keywordflow">if</span> text: logging.getLogger(__name__).<a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html#a6a2898a82918f046e95c384f0a302d93">debug</a>(text)</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>            <span class="keywordflow">return</span></div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>        KWS = dict(__file=sys.stderr, __prefix=cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a9bd93596caa75c86e7fa423f02ab1a6c">DEBUG_START</a>, __suffix=cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a70034fa7a4a0f7912242988a590a85cb">DEBUG_END</a>)</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>        cls.<a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html#a00415f3a62290d9bb13c596a9ae60a94">print</a>(text, *args, **dict(kwargs, **KWS))</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#a6a2898a82918f046e95c384f0a302d93">  230</a></span> </div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span> </div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>    <span class="preprocessor">@classmethod</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html#a124c00710a1325937af255607ca9cc84">log</a>(cls, level, text=&quot;&quot;, *args, **kwargs):</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span><span class="stringliteral">        Prints text to stderr, </span><span class="keywordflow">or</span> logs to logger <span class="keywordflow">if</span> APIMODE.</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span> </div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>        Text <span class="keywordflow">is</span> formatted <span class="keyword">with</span> args <span class="keywordflow">and</span> kwargs, <span class="keywordflow">in</span> level colors <span class="keywordflow">if</span> supported.</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span> </div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>        <span class="preprocessor">@param</span>   level  logging level like `logging.ERROR` <span class="keywordflow">or</span> <span class="stringliteral">&quot;ERROR&quot;</span></div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span><span class="stringliteral">        </span><span class="keywordflow">if</span> cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a061947498e8c2d601576f6e6f42fd7a0">APIMODE</a><a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html#a6fb8f7d0264e65add27c66547a3c5419">APIMODE</a>:</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>            text = cls.<a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html">_format</a>(text, *args, **kwargs)</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>            <span class="keywordflow">if</span> text: logging.getLogger(__name__).<a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html#a124c00710a1325937af255607ca9cc84">log</a>(level, text)</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>            <span class="keywordflow">return</span></div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>        level = logging.getLevelName(level)</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(level, TEXT_TYPES): level = logging.getLevelName(level)</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#a124c00710a1325937af255607ca9cc84">  247</a></span>        func = {<span class="stringliteral">&quot;DEBUG&quot;</span>: cls.<a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html#a6a2898a82918f046e95c384f0a302d93">debug</a>, <span class="stringliteral">&quot;WARNING&quot;</span>: cls.<a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html#ac2fb90faceda1d8dfe3713c829d37cd7">warn</a>, <span class="stringliteral">&quot;ERROR&quot;</span>: cls.<a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html#a67b5708431eee5a8c4aed6350ca1dbfc">error</a>}.get(level, cls.<a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html#a00415f3a62290d9bb13c596a9ae60a94">print</a>)</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>        func(text, *args, **dict(kwargs, __file=sys.stderr))</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span> </div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span> </div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>    <span class="preprocessor">@classmethod</span></div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html#a0517321e929ecd5c4e769a8f87eee3a4">flush</a>(cls):</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>        <span class="stringliteral">&quot;&quot;&quot;Ends current open line, if any.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>        <span class="keywordflow">if</span> cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html">_LINEOPEN</a><a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html">_LINEOPEN</a>: <a class="code hl_function" href="classgrepros_1_1common_1_1_console_printer.html#a00415f3a62290d9bb13c596a9ae60a94">print</a>()</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>        cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html">_LINEOPEN</a><a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html">_LINEOPEN</a> = <span class="keyword">False</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span> </div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span> </div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>    <span class="preprocessor">@classmethod</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_console_printer.html#a0517321e929ecd5c4e769a8f87eee3a4">  259</a></span>    <span class="keyword">def </span>_format(cls, text=&quot;&quot;, *args, **kwargs):</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span><span class="stringliteral">        Returns text formatted </span><span class="keyword">with</span> printf-style <span class="keywordflow">or</span> format() arguments.</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span> </div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>        <span class="preprocessor">@param</span>  __once  registers text, returns <span class="stringliteral">&quot;&quot;</span> <span class="keywordflow">if</span> text <span class="keywordflow">not</span> unique</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span><span class="stringliteral">        text, fmted = str(text), </span><span class="keyword">False</span></div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>        <span class="keywordflow">if</span> kwargs.get(<span class="stringliteral">&quot;__once&quot;</span>):</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>            <span class="keywordflow">if</span> text <span class="keywordflow">in</span> cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html">_UNIQUES</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>            cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_console_printer.html">_UNIQUES</a>.add(text)</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>        <span class="keywordflow">for</span> k <span class="keywordflow">in</span> (<span class="stringliteral">&quot;__file&quot;</span>, <span class="stringliteral">&quot;__end&quot;</span>, <span class="stringliteral">&quot;__once&quot;</span>, <span class="stringliteral">&quot;__prefix&quot;</span>, <span class="stringliteral">&quot;__suffix&quot;</span>): kwargs.pop(k, <span class="keywordtype">None</span>)</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>        <span class="keywordflow">try</span>: text, fmted = (text % args <span class="keywordflow">if</span> args <span class="keywordflow">else</span> text), bool(args)</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>        <span class="keywordflow">except</span> Exception: <span class="keywordflow">pass</span></div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>        <span class="keywordflow">try</span>: text, fmted = (text % kwargs <span class="keywordflow">if</span> kwargs <span class="keywordflow">else</span> text), fmted <span class="keywordflow">or</span> bool(kwargs)</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>        <span class="keywordflow">except</span> Exception: <span class="keywordflow">pass</span></div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>        <span class="keywordflow">try</span>: text = text.format(*args, **kwargs) <span class="keywordflow">if</span> <span class="keywordflow">not</span> fmted <span class="keywordflow">and</span> (args <span class="keywordflow">or</span> kwargs) <span class="keywordflow">else</span> text</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>        <span class="keywordflow">except</span> Exception: <span class="keywordflow">pass</span></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>        <span class="keywordflow">return</span> text</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span> </div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span> </div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span><span class="keyword">class </span><a class="code hl_class" href="classgrepros_1_1common_1_1_decompressor.html">Decompressor</a>(object):</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>    <span class="stringliteral">&quot;&quot;&quot;Decompresses zstandard archives.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span> </div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>    </div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>    EXTENSIONS = (<span class="stringliteral">&quot;.zst&quot;</span>, <span class="stringliteral">&quot;.zstd&quot;</span>)</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span> </div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>    </div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>    ZSTD_MAGIC = b<span class="stringliteral">&quot;\x28\xb5\x2f\xfd&quot;</span></div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span> </div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_decompressor.html">  288</a></span> </div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>    <span class="preprocessor">@classmethod</span></div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_decompressor.html#a0cfcbc1743b700cc433dd5d3f8d44db0">decompress</a>(cls, path, progress=False):</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_decompressor.html#ad2788c37d3aed499aa410f6d17e2f4b9">  292</a></span><span class="stringliteral">        Decompresses file to same directory, showing optional progress bar.</span></div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span><span class="stringliteral">        </span><span class="preprocessor">@return</span>  uncompressed file path</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_decompressor.html#adaa355ae6afede1c40ec9ad35775d21d">  295</a></span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span><span class="stringliteral">        cls.<a class="code hl_function" href="classgrepros_1_1common_1_1_decompressor.html#ab5417f324cfda877a9061d192ef90b49">validate</a>()</span></div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span><span class="stringliteral">        path2, bar, size, processed = os.path.splitext(path)[0], </span><span class="keywordtype">None</span>, os.path.getsize(path), 0</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>        fmt = <span class="keyword">lambda</span> s: format_bytes(s, strip=<span class="keyword">False</span>)</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>        <span class="keywordflow">if</span> progress:</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>            tpl = <span class="stringliteral">&quot; Decompressing %s (%s): {afterword}&quot;</span> % (os.path.basename(path), fmt(size))</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>            bar = <a class="code hl_class" href="classgrepros_1_1common_1_1_progress_bar.html">ProgressBar</a>(pulse=<span class="keyword">True</span>, aftertemplate=tpl)</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span> </div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>        ConsolePrinter.warn(<span class="stringliteral">&quot;Compressed file %s (%s), decompressing to %s.&quot;</span>, path, fmt(size), path2)</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_decompressor.html#a0cfcbc1743b700cc433dd5d3f8d44db0">  304</a></span>        bar <span class="keywordflow">and</span> bar.update(0).start()  <span class="comment"># Start progress pulse</span></div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>            <span class="keyword">with</span> open(path, <span class="stringliteral">&quot;rb&quot;</span>) <span class="keyword">as</span> f, open(path2, <span class="stringliteral">&quot;wb&quot;</span>) <span class="keyword">as</span> g:</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>                reader = zstandard.ZstdDecompressor().stream_reader(f)</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>                <span class="keywordflow">while</span> <span class="keyword">True</span>:</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>                    chunk = reader.read(1048576)</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>                    <span class="keywordflow">if</span> <span class="keywordflow">not</span> chunk: <span class="keywordflow">break</span>  <span class="comment"># while</span></div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span> </div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>                    g.write(chunk)</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>                    processed += len(chunk)</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>                    bar <span class="keywordflow">and</span> (setattr(bar, <span class="stringliteral">&quot;afterword&quot;</span>, fmt(processed)), bar.update(processed))</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>                reader.close()</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>            os.remove(path2)</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>            <span class="keywordflow">raise</span></div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>        <span class="keywordflow">finally</span>: bar <span class="keywordflow">and</span> (setattr(bar, <span class="stringliteral">&quot;pulse&quot;</span>, <span class="keyword">False</span>), bar.update(processed).stop())</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>        <span class="keywordflow">return</span> path2</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span> </div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span> </div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>    <span class="preprocessor">@classmethod</span></div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_decompressor.html#a4e86856299d41afaf3b0e4f4e433fe4f">is_compressed</a>(cls, path):</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>        <span class="stringliteral">&quot;&quot;&quot;Returns whether file is a recognized archive.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>        result = os.path.isfile(path)</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>        <span class="keywordflow">if</span> result:</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>            result = any(str(path).lower().endswith(x) <span class="keywordflow">for</span> x <span class="keywordflow">in</span> cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_decompressor.html#ad2788c37d3aed499aa410f6d17e2f4b9">EXTENSIONS</a>)</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>        <span class="keywordflow">if</span> result:</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>            <span class="keyword">with</span> open(path, <span class="stringliteral">&quot;rb&quot;</span>) <span class="keyword">as</span> f:</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>                result = (f.read(len(cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_decompressor.html#adaa355ae6afede1c40ec9ad35775d21d">ZSTD_MAGIC</a>)) == cls.<a class="code hl_variable" href="classgrepros_1_1common_1_1_decompressor.html#adaa355ae6afede1c40ec9ad35775d21d">ZSTD_MAGIC</a>)</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>        <span class="keywordflow">return</span> result</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_decompressor.html#a4e86856299d41afaf3b0e4f4e433fe4f">  333</a></span> </div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span> </div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>    <span class="preprocessor">@classmethod</span></div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_decompressor.html#aa8ae2dd4843b1f85cfcc4350c52dc934">make_decompressed_name</a>(cls, path):</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>        <span class="stringliteral">&quot;&quot;&quot;Returns the path without archive extension, if any.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>        <span class="keywordflow">return</span> os.path.splitext(path)[0] <span class="keywordflow">if</span> cls.<a class="code hl_function" href="classgrepros_1_1common_1_1_decompressor.html#a4e86856299d41afaf3b0e4f4e433fe4f">is_compressed</a>(path) <span class="keywordflow">else</span> path</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span> </div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span> </div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>    <span class="preprocessor">@classmethod</span></div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_decompressor.html#ab5417f324cfda877a9061d192ef90b49">validate</a>(cls):</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>        <span class="stringliteral">&quot;&quot;&quot;Raises error if decompression library not available.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> zstandard: <span class="keywordflow">raise</span> <a class="code hl_class" href="class_exception.html">Exception</a>(<span class="stringliteral">&quot;zstandard not installed, cannot decompress&quot;</span>)</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_decompressor.html#aa8ae2dd4843b1f85cfcc4350c52dc934">  345</a></span> </div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span> </div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span> </div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span><span class="keyword">class </span><a class="code hl_class" href="classgrepros_1_1common_1_1_progress_bar.html">ProgressBar</a>(threading.Thread):</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span><span class="stringliteral">    A simple ASCII progress bar </span><span class="keyword">with</span> a ticker thread</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_decompressor.html#ab5417f324cfda877a9061d192ef90b49">  351</a></span> </div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>    Drawn like</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>    <span class="stringliteral">&#39;[---------/   36%            ] Progressing text..&#39;</span>.</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    <span class="keywordflow">or</span> <span class="keywordflow">for</span> pulse mode</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    <span class="stringliteral">&#39;[    ----                    ] Progressing text..&#39;</span>.</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span><span class="stringliteral">    </span><span class="keyword">def </span>__init__(self, max=100, value=0, min=0, width=30, forechar=&quot;-&quot;,</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>                 backchar=&quot; &quot;, foreword=&quot;&quot;, afterword=&quot;&quot;, interval=1,</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>                 pulse=False, aftertemplate=&quot; {afterword}&quot;):</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span><span class="stringliteral">        Creates a new progress bar, without drawing it yet.</span></div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span><span class="stringliteral">        </span><span class="preprocessor">@param</span>   max            progress bar maximum value, 100%</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_progress_bar.html">  365</a></span>        <span class="preprocessor">@param</span>   value          progress bar initial value</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>        <span class="preprocessor">@param</span>   min            progress bar minimum value, <span class="keywordflow">for</span> 0%</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>        <span class="preprocessor">@param</span>   width          progress bar width (<span class="keywordflow">in</span> characters)</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>        <span class="preprocessor">@param</span>   forechar       character used <span class="keywordflow">for</span> filling the progress bar</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>        <span class="preprocessor">@param</span>   backchar       character used <span class="keywordflow">for</span> filling the background</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>        <span class="preprocessor">@param</span>   foreword       text <span class="keywordflow">in</span> front of progress bar</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>        <span class="preprocessor">@param</span>   afterword      text after progress bar</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>        <span class="preprocessor">@param</span>   interval       ticker thread interval, <span class="keywordflow">in</span> seconds</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>        <span class="preprocessor">@param</span>   pulse          ignore value-min-max, use constant pulse instead</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>        <span class="preprocessor">@param</span>   aftertemplate  afterword format() template, populated <span class="keyword">with</span> vars(self)</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span><span class="stringliteral">        threading.Thread.__init__(self)</span></div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span><span class="stringliteral">        </span><span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> locals().items(): setattr(self, k, v) <span class="keywordflow">if</span> <span class="stringliteral">&quot;self&quot;</span> != k <span class="keywordflow">else</span> 0</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>        afterword = aftertemplate.format(**vars(self))</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a56336262068f0a007b1dec71901be1ff">daemon</a>    = <span class="keyword">True</span>   <span class="comment"># Daemon threads do not keep application running</span></div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a174e692bc1b62677e7b4d611ed06b109">percent</a>   = <span class="keywordtype">None</span>   <span class="comment"># Current progress ratio in per cent</span></div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#afcc7a4b78ecd8fa7e713f8cfa0f51017">value</a>     = <span class="keywordtype">None</span>   <span class="comment"># Current progress bar value</span></div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_progress_bar.html#a226a7c3cb3ea364762c6c52ac7057fe4">  382</a></span>        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#afd7d49e17b69bd6bf3d7a649856c1067">pause</a>     = <span class="keyword">False</span>  <span class="comment"># Whether drawing is currently paused</span></div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a9c17a624c873883e9fccc9debdb1c10f">pulse_pos</a> = 0      <span class="comment"># Current pulse position</span></div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a5426824942db4253f87a1009fd5d2d4f">bar</a> = <span class="stringliteral">&quot;%s[%s%s]%s&quot;</span> % (foreword,</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>                                   backchar <span class="keywordflow">if</span> pulse <span class="keywordflow">else</span> forechar,</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>                                   backchar * (width - 3),</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>                                   afterword)</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_progress_bar.html#a56336262068f0a007b1dec71901be1ff">  388</a></span>        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a1702ac8242f004352282d0e43bcedaea">printbar</a> = self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a5426824942db4253f87a1009fd5d2d4f">bar</a>   <span class="comment"># Printable text, with padding to clear previous</span></div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_progress_bar.html#a174e692bc1b62677e7b4d611ed06b109">  389</a></span>        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a4299f0f984e2afbd4fcd4db6c744fdb5">progresschar</a> = itertools.cycle(<span class="stringliteral">&quot;-\\|/&quot;</span>)</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_progress_bar.html#afcc7a4b78ecd8fa7e713f8cfa0f51017">  390</a></span>        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#ae2dc0f1c541d7886d07e3e3d7f11b643">is_running</a> = <span class="keyword">False</span></div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_progress_bar.html#afd7d49e17b69bd6bf3d7a649856c1067">  391</a></span> </div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_progress_bar.html#a9c17a624c873883e9fccc9debdb1c10f">  392</a></span> </div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_progress_bar.html#a5426824942db4253f87a1009fd5d2d4f">  393</a></span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_progress_bar.html#a0b94b95d3fec21c5af220d2d571e38d2">update</a>(self, value=None, draw=True, flush=False):</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>        <span class="stringliteral">&quot;&quot;&quot;Updates the progress bar value, and refreshes by default; returns self.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>        <span class="keywordflow">if</span> value <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>: self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#afcc7a4b78ecd8fa7e713f8cfa0f51017">value</a> = min(self.max, max(self.min, value))</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>        afterword = self.aftertemplate.format(**vars(self))</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_progress_bar.html#a1702ac8242f004352282d0e43bcedaea">  397</a></span>        w_full = self.width - 2</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_progress_bar.html#a4299f0f984e2afbd4fcd4db6c744fdb5">  398</a></span>        <span class="keywordflow">if</span> self.pulse:</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_progress_bar.html#ae2dc0f1c541d7886d07e3e3d7f11b643">  399</a></span>            <span class="keywordflow">if</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a9c17a624c873883e9fccc9debdb1c10f">pulse_pos</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>                bartext = <span class="stringliteral">&quot;%s[%s]%s&quot;</span> % (self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a091f7df486118d289ff74433dcabb887">foreword</a>,</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>                                        self.forechar * (self.width - 2),</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_progress_bar.html#a0b94b95d3fec21c5af220d2d571e38d2">  402</a></span>                                        afterword)</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>                dash = self.forechar * max(1, int((self.width - 2) / 7))</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>                pos = self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a9c17a624c873883e9fccc9debdb1c10f">pulse_pos</a></div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>                <span class="keywordflow">if</span> pos &lt; len(dash):</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>                    dash = dash[:pos]</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>                <span class="keywordflow">elif</span> pos &gt;= self.width - 1:</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>                    dash = dash[:-(pos - self.width - 2)]</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span> </div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>                bar = <span class="stringliteral">&quot;[%s]&quot;</span> % (self.backchar * w_full)</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>                <span class="comment"># Write pulse dash into the middle of the bar</span></div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>                pos1 = min(self.width - 1, pos + 1)</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>                bar = bar[:pos1 - len(dash)] + dash + bar[pos1:]</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>                bartext = <span class="stringliteral">&quot;%s%s%s&quot;</span> % (self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a091f7df486118d289ff74433dcabb887">foreword</a>, bar, afterword)</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>                self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a9c17a624c873883e9fccc9debdb1c10f">pulse_pos</a> = (self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a9c17a624c873883e9fccc9debdb1c10f">pulse_pos</a> + 1) % (self.width + 2)</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>            percent = int(round(100.0 * self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#afcc7a4b78ecd8fa7e713f8cfa0f51017">value</a> / (self.max <span class="keywordflow">or</span> 1)))</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>            percent = 99 <span class="keywordflow">if</span> percent == 100 <span class="keywordflow">and</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#afcc7a4b78ecd8fa7e713f8cfa0f51017">value</a> &lt; self.max <span class="keywordflow">else</span> percent</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>            w_done = max(1, int(round((percent / 100.0) * w_full)))</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>            <span class="comment"># Build bar outline, animate by cycling last char from progress chars</span></div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>            char_last = self.forechar</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>            <span class="keywordflow">if</span> draw <span class="keywordflow">and</span> w_done &lt; w_full: char_last = next(self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a4299f0f984e2afbd4fcd4db6c744fdb5">progresschar</a>)</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>            bartext = <span class="stringliteral">&quot;%s[%s%s%s]%s&quot;</span> % (</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>                       self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a091f7df486118d289ff74433dcabb887">foreword</a>, self.forechar * (w_done - 1), char_last,</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>                       self.backchar * (w_full - w_done), afterword)</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>            <span class="comment"># Write percentage into the middle of the bar</span></div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>            centertxt = <span class="stringliteral">&quot; %2d%% &quot;</span> % percent</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>            pos = len(self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a091f7df486118d289ff74433dcabb887">foreword</a>) + int(self.width / 2 - len(centertxt) / 2)</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>            bartext = bartext[:pos] + centertxt + bartext[pos + len(centertxt):]</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>            self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a174e692bc1b62677e7b4d611ed06b109">percent</a> = percent</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a1702ac8242f004352282d0e43bcedaea">printbar</a> = bartext + <span class="stringliteral">&quot; &quot;</span> * max(0, len(self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a5426824942db4253f87a1009fd5d2d4f">bar</a>) - len(bartext))</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a5426824942db4253f87a1009fd5d2d4f">bar</a>, prevbar = bartext, self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a5426824942db4253f87a1009fd5d2d4f">bar</a></div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_progress_bar.html#a091f7df486118d289ff74433dcabb887">  434</a></span>        <span class="keywordflow">if</span> draw <span class="keywordflow">and</span> (flush <span class="keywordflow">or</span> prevbar != self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a5426824942db4253f87a1009fd5d2d4f">bar</a>): self.<a class="code hl_function" href="classgrepros_1_1common_1_1_progress_bar.html#a3157929ebdfa37155e3e4a6b46720272">draw</a>(flush)</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>        <span class="keywordflow">return</span> self</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span> </div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span> </div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_progress_bar.html#a3157929ebdfa37155e3e4a6b46720272">draw</a>(self, flush=False):</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span><span class="stringliteral">        Prints the progress bar, </span><span class="keyword">from</span> the beginning of the current line.</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span> </div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>        <span class="preprocessor">@param</span>   flush  add linefeed to end, forcing a new line <span class="keywordflow">for</span> any next <span class="keywordflow">print</span></div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span><span class="stringliteral">        ConsolePrinter.print(&quot;\r&quot;</span> + self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a1702ac8242f004352282d0e43bcedaea">printbar</a>, __end=<span class="stringliteral">&quot; &quot;</span>)</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>        <span class="keywordflow">if</span> len(self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a1702ac8242f004352282d0e43bcedaea">printbar</a>) != len(self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a5426824942db4253f87a1009fd5d2d4f">bar</a>):  <span class="comment"># Draw twice to position caret at true content end</span></div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>            self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a1702ac8242f004352282d0e43bcedaea">printbar</a> = self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a5426824942db4253f87a1009fd5d2d4f">bar</a></div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>            ConsolePrinter.print(<span class="stringliteral">&quot;\r&quot;</span> + self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a1702ac8242f004352282d0e43bcedaea">printbar</a>, __end=<span class="stringliteral">&quot; &quot;</span>)</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>        <span class="keywordflow">if</span> flush: ConsolePrinter.flush()</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span> </div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span> </div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_progress_bar.html#a08060e0924949738f75a0cdd8b49cef4">run</a>(self):</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_progress_bar.html#a3157929ebdfa37155e3e4a6b46720272">  452</a></span>        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#ae2dc0f1c541d7886d07e3e3d7f11b643">is_running</a> = <span class="keyword">True</span></div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>        <span class="keywordflow">while</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#ae2dc0f1c541d7886d07e3e3d7f11b643">is_running</a>:</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#afd7d49e17b69bd6bf3d7a649856c1067">pause</a>: self.<a class="code hl_function" href="classgrepros_1_1common_1_1_progress_bar.html#a0b94b95d3fec21c5af220d2d571e38d2">update</a>(self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#afcc7a4b78ecd8fa7e713f8cfa0f51017">value</a>)</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>            time.sleep(self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#a943af1103d1f1365d6c7f31b331119bf">interval</a>)</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span> </div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span> </div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_progress_bar.html#a2f39781a0bb89a6705efdc8d4c527def">stop</a>(self):</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_progress_bar.html#ae2dc0f1c541d7886d07e3e3d7f11b643">is_running</a> = <span class="keyword">False</span></div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_progress_bar.html#a08060e0924949738f75a0cdd8b49cef4">  460</a></span> </div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span> </div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span> </div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span><span class="keyword">class </span><a class="code hl_class" href="classgrepros_1_1common_1_1_len_iterable.html">LenIterable</a>(object):</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_progress_bar.html#a943af1103d1f1365d6c7f31b331119bf">  464</a></span>    <span class="stringliteral">&quot;&quot;&quot;Wrapper for iterable value with specified fixed length.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span> </div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_progress_bar.html#a226a7c3cb3ea364762c6c52ac7057fe4">__init__</a>(self, iterable, count):</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_progress_bar.html#a2f39781a0bb89a6705efdc8d4c527def">  467</a></span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span><span class="stringliteral">        </span><span class="preprocessor">@param</span>   iterable  any iterable value</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>        <span class="preprocessor">@param</span>   count     value to <span class="keywordflow">return</span> <span class="keywordflow">for</span> len(self), <span class="keywordflow">or</span> callable to <span class="keywordflow">return</span> value <span class="keyword">from</span></div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span><span class="stringliteral">        self._iterer = iter(iterable)</span></div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_len_iterable.html">  472</a></span><span class="stringliteral">        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_len_iterable.html">_count</a>  = count</span></div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span><span class="stringliteral">    </span><span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_len_iterable.html#a3d1374cfb30c05eeeb049c2197b5a824">__iter__</a>(self): <span class="keywordflow">return</span> self</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span> </div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>    <span class="keyword">def</span> __next__(self): <span class="keywordflow">return</span> next(self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_len_iterable.html">_iterer</a>)</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span> </div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_len_iterable.html#a6781b036ba1c606be31ad87a0d530414">__len__</a>(self):  <span class="keywordflow">return</span> self._count() <span class="keywordflow">if</span> callable(self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_len_iterable.html">_count</a>) <span class="keywordflow">else</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_len_iterable.html">_count</a></div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span> </div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_len_iterable.html#ae337de78ff4cc433441141564577ac65">  480</a></span> </div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span> </div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span><span class="keyword">class </span><a class="code hl_class" href="classgrepros_1_1common_1_1_text_wrapper.html">TextWrapper</a>(object):</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_len_iterable.html#a3d1374cfb30c05eeeb049c2197b5a824">  484</a></span><span class="stringliteral">    TextWrapper that supports custom substring widths </span><span class="keywordflow">in</span> line width calculation.</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span> </div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_len_iterable.html#aba69578c717635c5ab898e66318799c1">  486</a></span>    Intended <span class="keywordflow">for</span> wrapping text containing ANSI control codes.</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>    Heavily refactored <span class="keyword">from</span> Python standard library textwrap.TextWrapper.</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_len_iterable.html#a6781b036ba1c606be31ad87a0d530414">  488</a></span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span><span class="stringliteral">    </span></div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span><span class="stringliteral">    SPACE_RGX = re.compile(r&quot;([%s]+)&quot;</span> % re.escape(<span class="stringliteral">&quot;\t\n\x0b\x0c\r &quot;</span>))</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span> </div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>    </div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>    LENCACHEMAX = 10000</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span> </div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span> </div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_len_iterable.html#ae337de78ff4cc433441141564577ac65">__init__</a>(self, width=80, subsequent_indent=&quot;  &quot;, break_long_words=True,</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_text_wrapper.html">  498</a></span>                 drop_whitespace=False, max_lines=None, placeholder=&quot; ...&quot;, custom_widths=None):</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span><span class="stringliteral">        </span><span class="preprocessor">@param</span>   width              default maximum width to wrap at, 0 disables</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_text_wrapper.html#ad9fa472611d581ffb1d3dd22f0f9c7ff">  501</a></span>        <span class="preprocessor">@param</span>   subsequent_indent  string prepended to all consecutive lines</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>        <span class="preprocessor">@param</span>   break_long_words   <span class="keywordflow">break</span> words longer than width</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>        <span class="preprocessor">@param</span>   drop_whitespace    drop leading <span class="keywordflow">and</span> trailing whitespace <span class="keyword">from</span> lines</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_text_wrapper.html#a74302178e52e1de799f3424ebe2a6d82">  504</a></span>        <span class="preprocessor">@param</span>   max_lines          count to truncate lines <span class="keyword">from</span></div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>        <span class="preprocessor">@param</span>   placeholder        appended to last retained line when truncating</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>        <span class="preprocessor">@param</span>   custom_widths      {substring: len} to use <span class="keywordflow">in</span> line width calculation</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span><span class="stringliteral">        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a5558ace5433f9aabbf0a0ec059900d94">width</a>             = width</span></div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span><span class="stringliteral">        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a6513377ac92c85d46df28191e8b123b6">subsequent_indent</a> = subsequent_indent</span></div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span><span class="stringliteral">        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a3f0d44e708e1dd2905c55926eb782465">break_long_words</a>  = break_long_words</span></div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span><span class="stringliteral">        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a4951d21c8292a682f6d249ff375bdeb5">drop_whitespace</a>   = drop_whitespace</span></div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span><span class="stringliteral">        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a9e28a1714da334e04573f51ae2bbd8bb">max_lines</a>         = max_lines</span></div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span><span class="stringliteral">        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#ab73271f70effbb97663154a50a24ff00">placeholder</a>       = placeholder</span></div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span><span class="stringliteral">        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#ad2a4bbf0c950ca89e157c4d235120a8e">lencache</a>    = {}</span></div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span><span class="stringliteral">        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a146beaa715edc2d5a95859b066a631aa">customs</a>     = {s: l </span><span class="keywordflow">for</span> s, l <span class="keywordflow">in</span> (custom_widths <span class="keywordflow">or</span> {}).items() <span class="keywordflow">if</span> s}</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_text_wrapper.html#af2e08effc880373b353591807c5cdcf8">  517</a></span>        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#aa6a15ee24d54eae658b86b0257188f91">custom_lens</a> = [(s, len(s) - l) <span class="keywordflow">for</span> s, l <span class="keywordflow">in</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a146beaa715edc2d5a95859b066a631aa">customs</a>.items()]</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a815024d0c2db3754f20d8f1caebb45df">custom_rgx</a>  = re.compile(<span class="stringliteral">&quot;(%s)&quot;</span> % <span class="stringliteral">&quot;|&quot;</span>.join(re.escape(s) <span class="keywordflow">for</span> s <span class="keywordflow">in</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a146beaa715edc2d5a95859b066a631aa">customs</a>))</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_text_wrapper.html#a5558ace5433f9aabbf0a0ec059900d94">  519</a></span>        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a167f3d1d219cdeb0285ec26cc28c2275">disabled</a>    = <span class="keywordflow">not</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a5558ace5433f9aabbf0a0ec059900d94">width</a></div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_text_wrapper.html#a6513377ac92c85d46df28191e8b123b6">  520</a></span>        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a84685ed0862a8dcda5f320f131464797">minwidth</a>    = 1 + self.<a class="code hl_function" href="classgrepros_1_1common_1_1_text_wrapper.html#ae084efa20d64215bed791e83ccc61b73">strlen</a>(self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a6513377ac92c85d46df28191e8b123b6">subsequent_indent</a>) \</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_text_wrapper.html#a3f0d44e708e1dd2905c55926eb782465">  521</a></span>                             + self.<a class="code hl_function" href="classgrepros_1_1common_1_1_text_wrapper.html#ae084efa20d64215bed791e83ccc61b73">strlen</a>(self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#ab73271f70effbb97663154a50a24ff00">placeholder</a> <span class="keywordflow">if</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a9e28a1714da334e04573f51ae2bbd8bb">max_lines</a> <span class="keywordflow">else</span> <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_text_wrapper.html#a4951d21c8292a682f6d249ff375bdeb5">  522</a></span>        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a5558ace5433f9aabbf0a0ec059900d94">width</a>       = max(self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a5558ace5433f9aabbf0a0ec059900d94">width</a>, self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a84685ed0862a8dcda5f320f131464797">minwidth</a>)</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_text_wrapper.html#a9e28a1714da334e04573f51ae2bbd8bb">  523</a></span>        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a081090be3d428541490bb48323877653">realwidth</a>   = self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a5558ace5433f9aabbf0a0ec059900d94">width</a></div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_text_wrapper.html#ab73271f70effbb97663154a50a24ff00">  524</a></span> </div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span> </div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_text_wrapper.html#ad2a4bbf0c950ca89e157c4d235120a8e">  526</a></span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_text_wrapper.html#a5078c1241ccc4cc24738f5def56dd962">wrap</a>(self, text):</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_text_wrapper.html#a146beaa715edc2d5a95859b066a631aa">  527</a></span>        <span class="stringliteral">&quot;&quot;&quot;Returns a list of wrapped text lines, without linebreaks.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_text_wrapper.html#aa6a15ee24d54eae658b86b0257188f91">  528</a></span>        <span class="keywordflow">if</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a167f3d1d219cdeb0285ec26cc28c2275">disabled</a>: <span class="keywordflow">return</span> [text]</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_text_wrapper.html#a815024d0c2db3754f20d8f1caebb45df">  529</a></span>        result = []</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_text_wrapper.html#a167f3d1d219cdeb0285ec26cc28c2275">  530</a></span>        <span class="keywordflow">for</span> i, line <span class="keywordflow">in</span> enumerate(text.splitlines()):</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_text_wrapper.html#a84685ed0862a8dcda5f320f131464797">  531</a></span>            chunks = [c <span class="keywordflow">for</span> c <span class="keywordflow">in</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#ad9fa472611d581ffb1d3dd22f0f9c7ff">SPACE_RGX</a>.split(line) <span class="keywordflow">if</span> c]</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>            lines = self.<a class="code hl_function" href="classgrepros_1_1common_1_1_text_wrapper.html">_wrap_chunks</a>(chunks)</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>            <span class="keywordflow">if</span> i <span class="keywordflow">and</span> lines <span class="keywordflow">and</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a6513377ac92c85d46df28191e8b123b6">subsequent_indent</a>:</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_text_wrapper.html#a081090be3d428541490bb48323877653">  534</a></span>                lines[0] = self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a6513377ac92c85d46df28191e8b123b6">subsequent_indent</a> + lines[0]</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>            result.extend(lines)</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>            <span class="keywordflow">if</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a9e28a1714da334e04573f51ae2bbd8bb">max_lines</a> <span class="keywordflow">and</span> result <span class="keywordflow">and</span> len(result) &gt;= self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a9e28a1714da334e04573f51ae2bbd8bb">max_lines</a>:</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_text_wrapper.html#a5078c1241ccc4cc24738f5def56dd962">  537</a></span>                <span class="keywordflow">break</span>  <span class="comment"># for i, line</span></div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>        <span class="keywordflow">if</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a9e28a1714da334e04573f51ae2bbd8bb">max_lines</a> <span class="keywordflow">and</span> result <span class="keywordflow">and</span> (len(result) &gt; self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a9e28a1714da334e04573f51ae2bbd8bb">max_lines</a></div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>        <span class="keywordflow">or</span> len(result) == self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a9e28a1714da334e04573f51ae2bbd8bb">max_lines</a> <span class="keywordflow">and</span> <span class="keywordflow">not</span> text.endswith(result[-1].<a class="code hl_function" href="classgrepros_1_1common_1_1_text_wrapper.html#a4cf37c7679844282ea497b709b878f30">strip</a>())):</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>            result = result[:self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a9e28a1714da334e04573f51ae2bbd8bb">max_lines</a>]</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> result[-1].endswith(self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#ab73271f70effbb97663154a50a24ff00">placeholder</a>.lstrip()):</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>                result[-1] += self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#ab73271f70effbb97663154a50a24ff00">placeholder</a></div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>        <span class="keywordflow">if</span> len(self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#ad2a4bbf0c950ca89e157c4d235120a8e">lencache</a>)  &gt; self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a74302178e52e1de799f3424ebe2a6d82">LENCACHEMAX</a>:  self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#ad2a4bbf0c950ca89e157c4d235120a8e">lencache</a>.clear()</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>        <span class="keywordflow">return</span> result</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span> </div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span> </div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_text_wrapper.html#a9cbef4155d23d53861bfb64cee75a86b">reserve_width</a>(self, reserved=&quot;&quot;):</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>        <span class="stringliteral">&quot;&quot;&quot;Decreases the configured width by given amount (number or string).&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>        reserved = self.<a class="code hl_function" href="classgrepros_1_1common_1_1_text_wrapper.html#ae084efa20d64215bed791e83ccc61b73">strlen</a>(reserved) <span class="keywordflow">if</span> isinstance(reserved, TEXT_TYPES) <span class="keywordflow">else</span> reserved</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>        self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a5558ace5433f9aabbf0a0ec059900d94">width</a> = max(self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a84685ed0862a8dcda5f320f131464797">minwidth</a>, self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a081090be3d428541490bb48323877653">realwidth</a> - reserved)</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span> </div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span> </div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_text_wrapper.html#ae084efa20d64215bed791e83ccc61b73">strlen</a>(self, v):</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>        <span class="stringliteral">&quot;&quot;&quot;Returns length of string, using custom substring widths.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>        <span class="keywordflow">if</span> v <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#ad2a4bbf0c950ca89e157c4d235120a8e">lencache</a>:</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>            self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#ad2a4bbf0c950ca89e157c4d235120a8e">lencache</a>[v] = len(v) - sum(v.count(s) * ld <span class="keywordflow">for</span> s, ld <span class="keywordflow">in</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#aa6a15ee24d54eae658b86b0257188f91">custom_lens</a>)</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>        <span class="keywordflow">return</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#ad2a4bbf0c950ca89e157c4d235120a8e">lencache</a>[v]</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_text_wrapper.html#a9cbef4155d23d53861bfb64cee75a86b">  558</a></span> </div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span> </div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>    <span class="keyword">def </span><a class="code hl_function" href="classgrepros_1_1common_1_1_text_wrapper.html#a4cf37c7679844282ea497b709b878f30">strip</a>(self, v):</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>        <span class="stringliteral">&quot;&quot;&quot;Returns string with custom substrings and whitespace stripped.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>        <span class="keywordflow">return</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a815024d0c2db3754f20d8f1caebb45df">custom_rgx</a>.sub(<span class="stringliteral">&quot;&quot;</span>, v).<a class="code hl_function" href="classgrepros_1_1common_1_1_text_wrapper.html#a4cf37c7679844282ea497b709b878f30">strip</a>()</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span> </div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_text_wrapper.html#ae084efa20d64215bed791e83ccc61b73">  564</a></span> </div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    <span class="keyword">def </span>_wrap_chunks(self, chunks):</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>        <span class="stringliteral">&quot;&quot;&quot;Returns a list of lines joined from text chunks, wrapped to width.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>        lines = []</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>        chunks.reverse()  <span class="comment"># Reverse for efficient popping</span></div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span> </div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>        placeholder_len = self.<a class="code hl_function" href="classgrepros_1_1common_1_1_text_wrapper.html#ae084efa20d64215bed791e83ccc61b73">strlen</a>(self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#ab73271f70effbb97663154a50a24ff00">placeholder</a>)</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno"><a class="line" href="classgrepros_1_1common_1_1_text_wrapper.html#a4cf37c7679844282ea497b709b878f30">  571</a></span>        <span class="keywordflow">while</span> chunks:</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>            cur_line, cur_len = [], 0  <span class="comment"># [chunk, ], sum(map(len, cur_line))</span></div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>            indent = self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a6513377ac92c85d46df28191e8b123b6">subsequent_indent</a> <span class="keywordflow">if</span> lines <span class="keywordflow">else</span> <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>            width = self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a5558ace5433f9aabbf0a0ec059900d94">width</a> - self.<a class="code hl_function" href="classgrepros_1_1common_1_1_text_wrapper.html#ae084efa20d64215bed791e83ccc61b73">strlen</a>(indent)</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span> </div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>            <span class="keywordflow">if</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a4951d21c8292a682f6d249ff375bdeb5">drop_whitespace</a> <span class="keywordflow">and</span> lines <span class="keywordflow">and</span> <span class="keywordflow">not</span> self.<a class="code hl_function" href="classgrepros_1_1common_1_1_text_wrapper.html#a4cf37c7679844282ea497b709b878f30">strip</a>(chunks[-1]):</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>                del chunks[-1]  <span class="comment"># Drop initial whitespace on subsequent lines</span></div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span> </div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>            <span class="keywordflow">while</span> chunks:</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>                l = self.<a class="code hl_function" href="classgrepros_1_1common_1_1_text_wrapper.html#ae084efa20d64215bed791e83ccc61b73">strlen</a>(chunks[-1])</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>                <span class="keywordflow">if</span> cur_len + l &lt;= width:</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>                    cur_line.append(chunks.pop())</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>                    cur_len += l</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>                <span class="keywordflow">else</span>:  <span class="comment"># Line full</span></div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>                    <span class="keywordflow">break</span>  <span class="comment"># while chunks (inner-while)</span></div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span> </div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>            <span class="keywordflow">if</span> chunks <span class="keywordflow">and</span> self.<a class="code hl_function" href="classgrepros_1_1common_1_1_text_wrapper.html#ae084efa20d64215bed791e83ccc61b73">strlen</a>(chunks[-1]) &gt; width:</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>                <span class="comment"># Current line is full, and next chunk is too big to fit on any line</span></div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>                self.<a class="code hl_function" href="classgrepros_1_1common_1_1_text_wrapper.html">_handle_long_word</a>(chunks, cur_line, cur_len, width)</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>                cur_len = sum(map(self.<a class="code hl_function" href="classgrepros_1_1common_1_1_text_wrapper.html#ae084efa20d64215bed791e83ccc61b73">strlen</a>, cur_line))</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span> </div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>            <span class="keywordflow">if</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a4951d21c8292a682f6d249ff375bdeb5">drop_whitespace</a> <span class="keywordflow">and</span> cur_line <span class="keywordflow">and</span> <span class="keywordflow">not</span> self.<a class="code hl_function" href="classgrepros_1_1common_1_1_text_wrapper.html#a4cf37c7679844282ea497b709b878f30">strip</a>(cur_line[-1]):</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>                cur_len -= len(cur_line[-1])  <span class="comment"># Drop line last whitespace chunk</span></div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>                del cur_line[-1]</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span> </div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>            <span class="keywordflow">if</span> cur_line:</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>                <span class="keywordflow">if</span> (self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a9e28a1714da334e04573f51ae2bbd8bb">max_lines</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span> len(lines) + 1 &lt; self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a9e28a1714da334e04573f51ae2bbd8bb">max_lines</a></div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>                <span class="keywordflow">or</span> (<span class="keywordflow">not</span> chunks <span class="keywordflow">or</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a4951d21c8292a682f6d249ff375bdeb5">drop_whitespace</a></div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>                    <span class="keywordflow">and</span> len(chunks) == 1 <span class="keywordflow">and</span> <span class="keywordflow">not</span> self.<a class="code hl_function" href="classgrepros_1_1common_1_1_text_wrapper.html#a4cf37c7679844282ea497b709b878f30">strip</a>(chunks[0])) \</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>                <span class="keywordflow">and</span> cur_len &lt;= width):  <span class="comment"># Current line ok</span></div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>                    lines.append(indent + <span class="stringliteral">&quot;&quot;</span>.join(cur_line))</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>                    <span class="keywordflow">continue</span>  <span class="comment"># while chunks</span></div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>                <span class="keywordflow">continue</span>  <span class="comment"># while chunks</span></div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span> </div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>            <span class="keywordflow">while</span> cur_line:  <span class="comment"># Truncate for max_lines</span></div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>                <span class="keywordflow">if</span> self.<a class="code hl_function" href="classgrepros_1_1common_1_1_text_wrapper.html#a4cf37c7679844282ea497b709b878f30">strip</a>(cur_line[-1]):</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>                    <span class="keywordflow">if</span> cur_len + placeholder_len &lt;= width:</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>                        lines.append(indent + <span class="stringliteral">&quot;&quot;</span>.join(cur_line))</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>                        <span class="keywordflow">break</span>  <span class="comment"># while cur_line</span></div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>                    <span class="keywordflow">if</span> len(cur_line) == 1:</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>                        lines.append(indent + cur_line[-1])</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>                cur_len -= self.<a class="code hl_function" href="classgrepros_1_1common_1_1_text_wrapper.html#ae084efa20d64215bed791e83ccc61b73">strlen</a>(cur_line[-1])</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>                del cur_line[-1]</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> lines <span class="keywordflow">or</span> self.<a class="code hl_function" href="classgrepros_1_1common_1_1_text_wrapper.html#ae084efa20d64215bed791e83ccc61b73">strlen</a>(lines[-1]) + placeholder_len &gt; self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a5558ace5433f9aabbf0a0ec059900d94">width</a>:</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>                    lines.append(indent + self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#ab73271f70effbb97663154a50a24ff00">placeholder</a>.lstrip())</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>            <span class="keywordflow">break</span>  <span class="comment"># while chunks</span></div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span> </div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>        <span class="keywordflow">return</span> lines</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span> </div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span> </div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>    <span class="keyword">def </span>_handle_long_word(self, reversed_chunks, cur_line, cur_len, width):</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span><span class="stringliteral">        Breaks last chunk </span><span class="keywordflow">if</span> <span class="keywordflow">not</span> only containing a custom-width string,</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>        <span class="keywordflow">else</span> adds last chunk to current line <span class="keywordflow">if</span> line still empty.</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span><span class="stringliteral">        text = reversed_chunks[-1]</span></div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span><span class="stringliteral">        break_pos = 1 </span><span class="keywordflow">if</span> width &lt; 1 <span class="keywordflow">else</span> width - cur_len</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>        breakable = self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a3f0d44e708e1dd2905c55926eb782465">break_long_words</a> <span class="keywordflow">and</span> text <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a146beaa715edc2d5a95859b066a631aa">customs</a></div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>        <span class="keywordflow">if</span> breakable:</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>            unbreakable_spans = [m.span() <span class="keywordflow">for</span> m <span class="keywordflow">in</span> self.<a class="code hl_variable" href="classgrepros_1_1common_1_1_text_wrapper.html#a815024d0c2db3754f20d8f1caebb45df">custom_rgx</a>.finditer(text)]</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>            text_in_spans = [x <span class="keywordflow">for</span> x <span class="keywordflow">in</span> unbreakable_spans <span class="keywordflow">if</span> x[0] &lt;= break_pos &lt; x[1]]</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>            last_span = text_in_spans <span class="keywordflow">and</span> sorted(text_in_spans, key=<span class="keyword">lambda</span> x: -x[1])[0]</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>            break_pos = last_span[1] <span class="keywordflow">if</span> last_span <span class="keywordflow">else</span> break_pos</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>            breakable = 0 &lt; break_pos &lt; len(text)</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span> </div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>        <span class="keywordflow">if</span> breakable:</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>            cur_line.append(text[:break_pos])</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>            reversed_chunks[-1] = text[break_pos:]</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>        <span class="keywordflow">elif</span> <span class="keywordflow">not</span> cur_line:</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>            cur_line.append(reversed_chunks.pop())</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span> </div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span> </div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span> </div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span><span class="keyword">def </span>drop_zeros(v, replace=&quot;&quot;):</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>    <span class="stringliteral">&quot;&quot;&quot;Drops or replaces trailing zeros and empty decimal separator, if any.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>    <span class="keywordflow">return</span> re.sub(<span class="stringliteral">r&quot;\.?0+$&quot;</span>, <span class="keyword">lambda</span> x: len(x.group()) * replace, str(v))</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span> </div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span> </div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span><span class="keyword">def </span>ellipsize(text, limit, ellipsis=&quot;..&quot;):</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>    <span class="stringliteral">&quot;&quot;&quot;Returns text ellipsized if beyond limit.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>    <span class="keywordflow">if</span> limit &lt;= 0 <span class="keywordflow">or</span> len(text) &lt; limit:</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>        <span class="keywordflow">return</span> text</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>    <span class="keywordflow">return</span> text[:max(0, limit - len(ellipsis))] + ellipsis</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span> </div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span> </div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span><span class="keyword">def </span>ensure_namespace(val, defaults=None, dashify=(<span class="stringliteral">&quot;WRITE_OPTIONS&quot;</span>, ), **kwargs):</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span><span class="stringliteral">    Returns a copy of value </span><span class="keyword">as</span> `argparse.Namespace`, <span class="keyword">with</span> all keys uppercase.</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#ae4abe0d9b7a9d8d38530d35e29657f0d">  661</a></span> </div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>    Arguments <span class="keyword">with</span> list/tuple values <span class="keywordflow">in</span> defaults are ensured to have list/tuple values.</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span> </div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>    <span class="preprocessor">@param</span>  val       `argparse.Namespace` <span class="keywordflow">or</span> dictionary <span class="keywordflow">or</span> `<span class="keywordtype">None</span>`</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>    <span class="preprocessor">@param</span>  defaults  additional arguments to set to namespace <span class="keywordflow">if</span> missing</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#a73470c1dc6e4f9d2063ab2ce0efedd0b">  666</a></span>    <span class="preprocessor">@param</span>  dashify   names of dictionary arguments where to replace</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>                      the first underscore <span class="keywordflow">in</span> string keys <span class="keyword">with</span> a dash</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>    <span class="preprocessor">@param</span>  kwargs    any <span class="keywordflow">and</span> all argument overrides <span class="keyword">as</span> keyword overrides</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span><span class="stringliteral">    </span><span class="keywordflow">if</span> val <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span> isinstance(val, dict): val = argparse.Namespace(**val <span class="keywordflow">or</span> {})</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>    <span class="keywordflow">else</span>: val = <a class="code hl_function" href="namespacegrepros_1_1common.html#af5a6a12387662fdeff37db8fd6235131">structcopy</a>(val)</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>    <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> vars(val).items():</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> k.isupper():</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>            delattr(val, k)</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>            setattr(val, k.upper(), v)</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>    <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> ((k.upper(), v) <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> (defaults.items() <span class="keywordflow">if</span> defaults <span class="keywordflow">else</span> ())):</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(val, k): setattr(val, k, <a class="code hl_function" href="namespacegrepros_1_1common.html#af5a6a12387662fdeff37db8fd6235131">structcopy</a>(v))</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>    <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> ((k.upper(), v) <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> kwargs.items()): setattr(val, k, v)</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>    <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> ((k.upper(), v) <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> (defaults.items() <span class="keywordflow">if</span> defaults <span class="keywordflow">else</span> ())):</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>        <span class="keywordflow">if</span> isinstance(v, (tuple, list)) <span class="keywordflow">and</span> <span class="keywordflow">not</span> isinstance(getattr(val, k), (tuple, list)):</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>            setattr(val, k, [getattr(val, k)])</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>    <span class="keywordflow">for</span> arg <span class="keywordflow">in</span> (getattr(val, n, <span class="keywordtype">None</span>) <span class="keywordflow">for</span> n <span class="keywordflow">in</span> dashify <span class="keywordflow">or</span> ()):</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>        <span class="keywordflow">for</span> k <span class="keywordflow">in</span> (list(arg) <span class="keywordflow">if</span> isinstance(arg, dict) <span class="keywordflow">else</span> []):</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#ac0c43844ace8afe318b24d23bd51a6bc">  684</a></span>            <span class="keywordflow">if</span> isinstance(k, six.text_type) <span class="keywordflow">and</span> <span class="stringliteral">&quot;_&quot;</span> <span class="keywordflow">in</span> k <span class="keywordflow">and</span> 0 &lt; k.index(<span class="stringliteral">&quot;_&quot;</span>) &lt; len(k) - 1:</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>                arg[k.replace(<span class="stringliteral">&quot;_&quot;</span>, <span class="stringliteral">&quot;-&quot;</span>, 1)] = arg.pop(k)</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>    <span class="keywordflow">return</span> val</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span> </div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span> </div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span><span class="keyword">def </span><a class="code hl_function" href="namespacegrepros_1_1common.html#ac3c0d706b2076ef82e2f264a8152a986">filter_dict</a>(dct, keys=(), values=(), reverse=<span class="keyword">False</span>):</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span><span class="stringliteral">    Filters string dictionary by keys </span><span class="keywordflow">and</span> values, supporting * wildcards.</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>    Dictionary values may be additional lists; keys <span class="keyword">with</span> emptied lists are dropped.</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span> </div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>    Retains only entries that find a match (supports * wildcards);</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>    <span class="keywordflow">if</span> reverse, retains only entries that do <span class="keywordflow">not</span> find a match.</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span><span class="stringliteral">    result = type(dct)()</span></div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span><span class="stringliteral">    kpatterns = [<a class="code hl_function" href="namespacegrepros_1_1common.html#a7048341cc827b7dbf562ab0390897f6f">wildcard_to_regex</a>(x, end=</span><span class="keyword">True</span>) <span class="keywordflow">for</span> x <span class="keywordflow">in</span> keys]</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>    vpatterns = [<a class="code hl_function" href="namespacegrepros_1_1common.html#a7048341cc827b7dbf562ab0390897f6f">wildcard_to_regex</a>(x, end=<span class="keyword">True</span>) <span class="keywordflow">for</span> x <span class="keywordflow">in</span> values]</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>    <span class="keywordflow">for</span> k, vv <span class="keywordflow">in</span> dct.items() <span class="keywordflow">if</span> <span class="keywordflow">not</span> reverse <span class="keywordflow">else</span> ():</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>        is_array = isinstance(vv, (list, tuple))</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>        <span class="keywordflow">for</span> v <span class="keywordflow">in</span> (vv <span class="keywordflow">if</span> is_array <span class="keywordflow">else</span> [vv]):</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>            <span class="keywordflow">if</span>  (<span class="keywordflow">not</span> keys   <span class="keywordflow">or</span> k <span class="keywordflow">in</span> keys   <span class="keywordflow">or</span> any(p.match(k) <span class="keywordflow">for</span> p <span class="keywordflow">in</span> kpatterns)) \</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>            <span class="keywordflow">and</span> (<span class="keywordflow">not</span> values <span class="keywordflow">or</span> v <span class="keywordflow">in</span> values <span class="keywordflow">or</span> any(p.match(v) <span class="keywordflow">for</span> p <span class="keywordflow">in</span> vpatterns)):</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>                result.setdefault(k, []).append(v) <span class="keywordflow">if</span> is_array <span class="keywordflow">else</span> result.update({k: v})</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>    <span class="keywordflow">for</span> k, vv <span class="keywordflow">in</span> dct.items() <span class="keywordflow">if</span> reverse <span class="keywordflow">else</span> ():</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>        is_array = isinstance(vv, (list, tuple))</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>        <span class="keywordflow">for</span> v <span class="keywordflow">in</span> (vv <span class="keywordflow">if</span> is_array <span class="keywordflow">else</span> [vv]):</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>            <span class="keywordflow">if</span>  (k <span class="keywordflow">not</span> <span class="keywordflow">in</span> keys   <span class="keywordflow">and</span> <span class="keywordflow">not</span> any(p.match(k) <span class="keywordflow">for</span> p <span class="keywordflow">in</span> kpatterns)) \</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>            <span class="keywordflow">and</span> (v <span class="keywordflow">not</span> <span class="keywordflow">in</span> values <span class="keywordflow">and</span> <span class="keywordflow">not</span> any(p.match(v) <span class="keywordflow">for</span> p <span class="keywordflow">in</span> vpatterns)):</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#ac3c0d706b2076ef82e2f264a8152a986">  711</a></span>                result.setdefault(k, []).append(v) <span class="keywordflow">if</span> is_array <span class="keywordflow">else</span> result.update({k: v})</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>    <span class="keywordflow">return</span> result</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span> </div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span> </div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span><span class="keyword">def </span><a class="code hl_function" href="namespacegrepros_1_1common.html#ae332d1619b0f13555033ede3949a543d">find_files</a>(names=(), paths=(), extensions=(), skip_extensions=(), recurse=<span class="keyword">False</span>):</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span><span class="stringliteral">    Yields filenames </span><span class="keyword">from</span> current directory <span class="keywordflow">or</span> given paths.</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span> </div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>    Seeks only files <span class="keyword">with</span> given extensions <span class="keywordflow">if</span> names <span class="keywordflow">not</span> given.</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>    Logs errors <span class="keywordflow">for</span> names <span class="keywordflow">and</span> paths <span class="keywordflow">not</span> found.</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span> </div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>    <span class="preprocessor">@param</span>   names            list of specific files to <span class="keywordflow">return</span> (supports * wildcards)</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>    <span class="preprocessor">@param</span>   paths            list of paths to look under, <span class="keywordflow">if</span> <span class="keywordflow">not</span> using current directory</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>    <span class="preprocessor">@param</span>   extensions       list of extensions to select <span class="keywordflow">if</span> <span class="keywordflow">not</span> using names, <span class="keyword">as</span> (<span class="stringliteral">&quot;.ext1&quot;</span>, ..)</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>    <span class="preprocessor">@param</span>   skip_extensions  list of extensions to skip <span class="keywordflow">if</span> <span class="keywordflow">not</span> using names, <span class="keyword">as</span> (<span class="stringliteral">&quot;.ext1&quot;</span>, ..)</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>    <span class="preprocessor">@param</span>   recurse          whether to recurse into subdirectories</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span><span class="stringliteral">    namesfound, pathsfound = set(), set()</span></div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span><span class="stringliteral">    </span><span class="keyword">def </span>iter_files(directory):</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>        <span class="stringliteral">&quot;&quot;&quot;Yields matching filenames from path.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>        <span class="keywordflow">if</span> os.path.isfile(directory):</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>            ConsolePrinter.log(logging.ERROR, <span class="stringliteral">&quot;%s: Is a file&quot;</span>, directory)</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>            <span class="keywordflow">return</span></div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>        <span class="keywordflow">for</span> path <span class="keywordflow">in</span> sorted(glob.glob(directory)):  <span class="comment"># Expand * wildcards, if any</span></div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>            pathsfound.add(directory)</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>            <span class="keywordflow">for</span> n <span class="keywordflow">in</span> names:</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>                p = n <span class="keywordflow">if</span> <span class="keywordflow">not</span> paths <span class="keywordflow">or</span> os.path.isabs(n) <span class="keywordflow">else</span> os.path.join(path, n)</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>                <span class="keywordflow">for</span> f <span class="keywordflow">in</span> (f <span class="keywordflow">for</span> f <span class="keywordflow">in</span> glob.glob(p) <span class="keywordflow">if</span> <span class="stringliteral">&quot;*&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> n</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>                          <span class="keywordflow">or</span> <span class="keywordflow">not</span> any(map(f.endswith, skip_extensions))):</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>                    <span class="keywordflow">if</span> os.path.isdir(f):</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>                        ConsolePrinter.log(logging.ERROR, <span class="stringliteral">&quot;%s: Is a directory&quot;</span>, f)</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#ae332d1619b0f13555033ede3949a543d">  742</a></span>                        <span class="keywordflow">continue</span>  <span class="comment"># for n</span></div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>                    namesfound.add(n)</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>                    <span class="keywordflow">yield</span> f</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>            <span class="keywordflow">for</span> root, _, files <span class="keywordflow">in</span> os.walk(path) <span class="keywordflow">if</span> <span class="keywordflow">not</span> names <span class="keywordflow">else</span> ():</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>                <span class="keywordflow">for</span> f <span class="keywordflow">in</span> (os.path.join(root, f) <span class="keywordflow">for</span> f <span class="keywordflow">in</span> sorted(files)</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>                          <span class="keywordflow">if</span> (<span class="keywordflow">not</span> extensions <span class="keywordflow">or</span> any(map(f.endswith, extensions)))</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>                          <span class="keywordflow">and</span> <span class="keywordflow">not</span> any(map(f.endswith, skip_extensions))):</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>                    <span class="keywordflow">yield</span> f</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> recurse:</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>                    <span class="keywordflow">break</span>  <span class="comment"># for root</span></div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span> </div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>    processed = set()</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>    <span class="keywordflow">for</span> f <span class="keywordflow">in</span> (f <span class="keywordflow">for</span> p <span class="keywordflow">in</span> paths <span class="keywordflow">or</span> [<span class="stringliteral">&quot;.&quot;</span>] <span class="keywordflow">for</span> f <span class="keywordflow">in</span> iter_files(p)):</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>        <span class="keywordflow">if</span> os.path.abspath(f) <span class="keywordflow">not</span> <span class="keywordflow">in</span> processed:</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>            processed.add(os.path.abspath(f))</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> paths <span class="keywordflow">and</span> f == os.path.join(<span class="stringliteral">&quot;.&quot;</span>, os.path.basename(f)):</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>                f = os.path.basename(f)  <span class="comment"># Strip leading &quot;./&quot;</span></div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>            <span class="keywordflow">yield</span> f</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span> </div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>    <span class="keywordflow">for</span> path <span class="keywordflow">in</span> (p <span class="keywordflow">for</span> p <span class="keywordflow">in</span> paths <span class="keywordflow">if</span> p <span class="keywordflow">not</span> <span class="keywordflow">in</span> pathsfound):</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>        ConsolePrinter.log(logging.ERROR, <span class="stringliteral">&quot;%s: No such directory&quot;</span>, path)</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>    <span class="keywordflow">for</span> name <span class="keywordflow">in</span> (n <span class="keywordflow">for</span> n <span class="keywordflow">in</span> names <span class="keywordflow">if</span> n <span class="keywordflow">not</span> <span class="keywordflow">in</span> namesfound):</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>        ConsolePrinter.log(logging.ERROR, <span class="stringliteral">&quot;%s: No such file&quot;</span>, name)</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span> </div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span> </div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span><span class="keyword">def </span><a class="code hl_function" href="namespacegrepros_1_1common.html#accdaf5e86a6940d40e2a40c2f3960232">format_timedelta</a>(delta):</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>    <span class="stringliteral">&quot;&quot;&quot;Formats the datetime.timedelta as &quot;3d 40h 23min 23.1sec&quot;.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>    dd, rem = divmod(delta.total_seconds(), 24*3600)</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>    hh, rem = divmod(rem, 3600)</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>    mm, ss  = divmod(rem, 60)</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>    items = []</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>    <span class="keywordflow">for</span> c, n <span class="keywordflow">in</span> (dd, <span class="stringliteral">&quot;d&quot;</span>), (hh, <span class="stringliteral">&quot;h&quot;</span>), (mm, <span class="stringliteral">&quot;min&quot;</span>), (ss, <span class="stringliteral">&quot;sec&quot;</span>):</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>        f = <span class="stringliteral">&quot;%d&quot;</span> % c <span class="keywordflow">if</span> <span class="stringliteral">&quot;sec&quot;</span> != n <span class="keywordflow">else</span> drop_zeros(round(c, 9))</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>        <span class="keywordflow">if</span> f != <span class="stringliteral">&quot;0&quot;</span>: items += [f + n]</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>    <span class="keywordflow">return</span> <span class="stringliteral">&quot; &quot;</span>.join(items <span class="keywordflow">or</span> [<span class="stringliteral">&quot;0sec&quot;</span>])</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span> </div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span> </div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span><span class="keyword">def </span>format_bytes(size, precision=2, inter=&quot; &quot;, strip=True):</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>    <span class="stringliteral">&quot;&quot;&quot;Returns a formatted byte size (like 421.40 MB), trailing zeros optionally removed.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>    result = <span class="stringliteral">&quot;0 bytes&quot;</span></div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#accdaf5e86a6940d40e2a40c2f3960232">  782</a></span>    <span class="keywordflow">if</span> size:</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>        UNITS = [(<span class="stringliteral">&quot;bytes&quot;</span>, <span class="stringliteral">&quot;byte&quot;</span>)[1 == size]] + [x + <span class="stringliteral">&quot;B&quot;</span> <span class="keywordflow">for</span> x <span class="keywordflow">in</span> <span class="stringliteral">&quot;KMGTPEZY&quot;</span>]</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>        exponent = min(int(math.log(size, 1024)), len(UNITS) - 1)</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>        result = <span class="stringliteral">&quot;%.*f&quot;</span> % (precision, size / (1024. ** exponent))</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>        result += <span class="stringliteral">&quot;&quot;</span> <span class="keywordflow">if</span> precision &gt; 0 <span class="keywordflow">else</span> <span class="stringliteral">&quot;.&quot;</span>  <span class="comment"># Do not strip integer zeroes</span></div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>        result = (drop_zeros(result) <span class="keywordflow">if</span> strip <span class="keywordflow">else</span> result) + inter + UNITS[exponent]</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>    <span class="keywordflow">return</span> result</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span> </div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span> </div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span><span class="keyword">def </span><a class="code hl_function" href="namespacegrepros_1_1common.html#a3216ef32e864455856ca733bd0f1ab14">format_stamp</a>(stamp):</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>    <span class="stringliteral">&quot;&quot;&quot;Returns ISO datetime from UNIX timestamp.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>    <span class="keywordflow">return</span> datetime.datetime.fromtimestamp(stamp).isoformat(sep=<span class="stringliteral">&quot; &quot;</span>)</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#a2ce190b82000d5a44b4769dc4aa8eca6">  794</a></span> </div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span> </div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span><span class="keyword">def </span>get_name(obj):</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span><span class="stringliteral">    Returns the fully namespaced name </span><span class="keywordflow">for</span> a Python module, <span class="keyword">class</span>, function <span class="keywordflow">or</span> object.</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span> </div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>    E.g. <span class="stringliteral">&quot;my.thing&quot;</span> <span class="keywordflow">or</span> <span class="stringliteral">&quot;my.module.MyCls&quot;</span> <span class="keywordflow">or</span> <span class="stringliteral">&quot;my.module.MyCls.my_method&quot;</span></div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>    <span class="keywordflow">or</span> <span class="stringliteral">&quot;my.module.MyCls&lt;0x1234abcd&gt;&quot;</span> <span class="keywordflow">or</span> <span class="stringliteral">&quot;my.module.MyCls&lt;0x1234abcd&gt;.my_method&quot;</span>.</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span><span class="stringliteral">    namer = </span><span class="keyword">lambda</span> x: getattr(x, <span class="stringliteral">&quot;__qualname__&quot;</span>, getattr(x, <span class="stringliteral">&quot;__name__&quot;</span>, <span class="stringliteral">&quot;&quot;</span>))</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>    <span class="keywordflow">if</span> inspect.ismodule(obj): <span class="keywordflow">return</span> namer(obj)</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>    <span class="keywordflow">if</span> inspect.isclass(obj):  <span class="keywordflow">return</span> <span class="stringliteral">&quot;.&quot;</span>.join((obj.__module__, namer(obj)))</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#a3216ef32e864455856ca733bd0f1ab14">  806</a></span>    <span class="keywordflow">if</span> inspect.isroutine(obj):</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>        parts, self = [], six.get_method_self(obj)</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>        <span class="keywordflow">if</span> self <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:           parts.extend((get_name(self), obj.__name__))</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>        <span class="keywordflow">elif</span> hasattr(obj, <span class="stringliteral">&quot;im_class&quot;</span>): parts.extend((get_name(obj.im_class), namer(obj)))  <span class="comment"># Py2</span></div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>        <span class="keywordflow">else</span>:                          parts.extend((obj.__module__, namer(obj)))          <span class="comment"># Py3</span></div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>        <span class="keywordflow">return</span> <span class="stringliteral">&quot;.&quot;</span>.join(parts)</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>    cls = type(obj)</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>    <span class="keywordflow">return</span> <span class="stringliteral">&quot;%s.%s&lt;0x%x&gt;&quot;</span> % (cls.__module__, namer(cls), id(obj))</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span> </div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span> </div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span><span class="keyword">def </span><a class="code hl_function" href="namespacegrepros_1_1common.html#aba660430d1140332d72be50f6faae9fc">has_arg</a>(func, name):</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#a95b9db6f6a398a02bdc2d0f310725152">  817</a></span>    <span class="stringliteral">&quot;&quot;&quot;Returns whether function supports taking specified argument by name.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>    spec = getattr(inspect, <span class="stringliteral">&quot;getfullargspec&quot;</span>, getattr(inspect, <span class="stringliteral">&quot;getargspec&quot;</span>, <span class="keywordtype">None</span>))(func)  <span class="comment"># Py3/Py2</span></div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>    <span class="keywordflow">return</span> name <span class="keywordflow">in</span> spec.args <span class="keywordflow">or</span> name <span class="keywordflow">in</span> getattr(spec, <span class="stringliteral">&quot;kwonlyargs&quot;</span>, ()) <span class="keywordflow">or</span> \</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>           getattr(spec, <span class="stringliteral">&quot;varkw&quot;</span>, <span class="keywordtype">None</span>) <span class="keywordflow">or</span> getattr(spec, <span class="stringliteral">&quot;keywords&quot;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span> </div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span> </div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span><span class="keyword">def </span>import_item(name):</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span><span class="stringliteral">    Returns imported module, </span><span class="keywordflow">or</span> identifier <span class="keyword">from</span> imported namespace; raises on error.</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span> </div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>    <span class="preprocessor">@param</span>   name  Python module name like <span class="stringliteral">&quot;my.module&quot;</span></div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>                   <span class="keywordflow">or</span> module namespace identifier like <span class="stringliteral">&quot;my.module.Class&quot;</span></div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span><span class="stringliteral">    result, parts = </span><span class="keywordtype">None</span>, name.split(<span class="stringliteral">&quot;.&quot;</span>)</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#aba660430d1140332d72be50f6faae9fc">  831</a></span>    <span class="keywordflow">for</span> i, item <span class="keywordflow">in</span> enumerate(parts):</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>        path, success = <span class="stringliteral">&quot;.&quot;</span>.join(parts[:i + 1]), <span class="keyword">False</span></div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>        <span class="keywordflow">try</span>: result, success = importlib.import_module(path), <span class="keyword">True</span></div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>        <span class="keywordflow">except</span> ImportError: <span class="keywordflow">pass</span></div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> success <span class="keywordflow">and</span> i:</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>            <span class="keywordflow">try</span>: result, success = getattr(result, item), <span class="keyword">True</span></div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>            <span class="keywordflow">except</span> AttributeError: <span class="keywordflow">pass</span></div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> success:</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>            <span class="keywordflow">raise</span> ImportError(<span class="stringliteral">&quot;No module or identifier named %r&quot;</span> % path)</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>    <span class="keywordflow">return</span> result</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span> </div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span> </div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#a4f03f64a93c737ee8fc494e4e3e68bbe">  843</a></span><span class="keyword">def </span><a class="code hl_function" href="namespacegrepros_1_1common.html#a3fab58da26eb9906b58541ac244d6783">is_iterable</a>(value):</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>    <span class="stringliteral">&quot;&quot;&quot;Returns whether value is iterable.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>    <span class="keywordflow">try</span>: iter(value)</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>    <span class="keywordflow">except</span> Exception: <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>    <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span> </div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span> </div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span><span class="keyword">def </span><a class="code hl_function" href="namespacegrepros_1_1common.html#ab017eabe616ba9cf8397bf90beb3ac80">is_stream</a>(value):</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>    <span class="stringliteral">&quot;&quot;&quot;Returns whether value is a file-like object.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>    <span class="keywordflow">try</span>: <span class="keywordflow">return</span> isinstance(value, (file, io.IOBase))       <span class="comment"># Py2</span></div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>    <span class="keywordflow">except</span> NameError: <span class="keywordflow">return</span> isinstance(value, io.IOBase)  <span class="comment"># Py3</span></div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span> </div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span> </div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span><span class="keyword">def </span>makedirs(path):</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#a3fab58da26eb9906b58541ac244d6783">  857</a></span>    <span class="stringliteral">&quot;&quot;&quot;Creates directory structure for path if not already existing.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>    parts, accum = list(filter(bool, os.path.realpath(path).split(os.sep))), []</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>    <span class="keywordflow">while</span> parts:</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>        accum.append(parts.pop(0))</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>        curpath = os.path.join(os.sep, accum[0] + os.sep, *accum[1:])  <span class="comment"># Windows drive letter thing</span></div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> os.path.exists(curpath):</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>            os.mkdir(curpath)</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#ab017eabe616ba9cf8397bf90beb3ac80">  864</a></span> </div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span> </div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span><span class="keyword">def </span><a class="code hl_function" href="namespacegrepros_1_1common.html#af5a6a12387662fdeff37db8fd6235131">structcopy</a>(value):</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span><span class="stringliteral">    Returns a deep copy of a standard data structure (dict, list, set, tuple),</span></div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span><span class="stringliteral">    other object types reused instead of copied.</span></div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#a0dd0db6aa0c1019e8c370302079cf349">  870</a></span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span><span class="stringliteral">    COLLECTIONS = (dict, list, set, tuple)</span></div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span><span class="stringliteral">    memo = {}</span></div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span><span class="stringliteral">    </span><span class="keyword">def </span>collect(x):  <span class="comment"># Walk structure and collect objects to skip copying</span></div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>        <span class="keywordflow">if</span> isinstance(x, argparse.Namespace): x = vars(x)</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(x, COLLECTIONS): <span class="keywordflow">return</span> memo.update([(id(x), x)])</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>        <span class="keywordflow">for</span> y <span class="keywordflow">in</span> sum(map(list, x.items()), []) <span class="keywordflow">if</span> isinstance(x, dict) <span class="keywordflow">else</span> x: collect(y)</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>    collect(value)</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>    <span class="keywordflow">return</span> copy.deepcopy(value, memo)</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span> </div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span> </div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span><span class="keyword">def </span>memoize(func):</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>    <span class="stringliteral">&quot;&quot;&quot;Returns a results-caching wrapper for the function, cache used if arguments hashable.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>    cache = {}</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#af5a6a12387662fdeff37db8fd6235131">  884</a></span>    <span class="keyword">def </span>inner(*args, **kwargs):</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>        key = args + sum(kwargs.items(), ())</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>        <span class="keywordflow">try</span>: hash(key)</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>        <span class="keywordflow">except</span> Exception: <span class="keywordflow">return</span> func(*args, **kwargs)</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>        <span class="keywordflow">if</span> key <span class="keywordflow">not</span> <span class="keywordflow">in</span> cache:</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>            cache[key] = func(*args, **kwargs)</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>        <span class="keywordflow">return</span> cache[key]</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>    <span class="keywordflow">return</span> functools.update_wrapper(inner, func)</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span> </div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span> </div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span><span class="keyword">def </span>merge_dicts(d1, d2):</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#a68f9ee952028a34ab4d75627bcc0cf62">  895</a></span>    <span class="stringliteral">&quot;&quot;&quot;Merges d2 into d1, recursively for nested dicts.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>    <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> d2.items():</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>        <span class="keywordflow">if</span> k <span class="keywordflow">in</span> d1 <span class="keywordflow">and</span> isinstance(v, dict) <span class="keywordflow">and</span> isinstance(d1[k], dict):</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>            merge_dicts(d1[k], v)</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>            d1[k] = v</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span> </div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span> </div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span><span class="keyword">def </span><a class="code hl_function" href="namespacegrepros_1_1common.html#a73267537ca6dba825de9bde0bd9d8c3a">merge_spans</a>(spans, join_blanks=False):</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span><span class="stringliteral">    Returns a sorted list of (start, end) spans </span><span class="keyword">with</span> overlapping spans merged.</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span> </div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>    <span class="preprocessor">@param</span>   join_blanks  whether to merge consecutive zero-length spans,</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#a7768e2ab3545567aef8fe4b74e7a6b16">  908</a></span>                          e.g. [(0, 0), (1, 1)] -&gt; [(0, 1)]</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span><span class="stringliteral">    result = sorted(spans)</span></div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span><span class="stringliteral">    </span><span class="keywordflow">if</span> result <span class="keywordflow">and</span> join_blanks:</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>        blanks = [(a, b) <span class="keywordflow">for</span> a, b <span class="keywordflow">in</span> result <span class="keywordflow">if</span> a == b]</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>        others = [(a, b) <span class="keywordflow">for</span> a, b <span class="keywordflow">in</span> result <span class="keywordflow">if</span> a != b]</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>        others.extend(blanks[:1])</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>        <span class="keywordflow">for</span> span <span class="keywordflow">in</span> blanks[1:]:</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>            <span class="keywordflow">if</span> span[0] == others[-1][1] + 1:</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>                others[-1] = (others[-1][0], span[1])</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>                others.append(span)</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>        result = sorted(others)</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>    result, rest = result[:1], result[1:]</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#a73267537ca6dba825de9bde0bd9d8c3a">  922</a></span>    <span class="keywordflow">for</span> span <span class="keywordflow">in</span> rest:</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>        <span class="keywordflow">if</span> span[0] &lt;= result[-1][1]:</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>            result[-1] = (result[-1][0], max(span[1], result[-1][1]))</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>            result.append(span)</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>    <span class="keywordflow">return</span> result</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span> </div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span> </div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span><span class="keyword">def </span>parse_datetime(text):</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>    <span class="stringliteral">&quot;&quot;&quot;Returns datetime object from ISO datetime string (may be partial). Raises if invalid.&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>    BASE = re.sub(<span class="stringliteral">r&quot;\D&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, datetime.datetime.min.isoformat())  <span class="comment"># &quot;00010101000000&quot;</span></div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>    text = re.sub(<span class="stringliteral">r&quot;\D&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, text)</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>    text += BASE[len(text):] <span class="keywordflow">if</span> text <span class="keywordflow">else</span> <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>    dt = datetime.datetime.strptime(text[:len(BASE)], <span class="stringliteral">&quot;%Y%m%d%H%M%S&quot;</span>)</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>    <span class="keywordflow">return</span> dt + datetime.timedelta(microseconds=int(text[len(BASE):] <span class="keywordflow">or</span> <span class="stringliteral">&quot;0&quot;</span>))</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span> </div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span> </div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span><span class="keyword">def </span><a class="code hl_function" href="namespacegrepros_1_1common.html#afe2e5b13a029be617ff18fd00319a532">parse_number</a>(value, suffixes=None):</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span><span class="stringliteral">    Returns an integer parsed </span><span class="keyword">from</span> text, raises on error.</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span> </div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#a3cb2a749bcd4fd2e2cdcdd8c95209ab3">  943</a></span>    <span class="preprocessor">@param</span>   value     text <span class="keywordflow">or</span> binary string to parse, may contain abbrevations like <span class="stringliteral">&quot;12K&quot;</span></div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>    <span class="preprocessor">@param</span>   suffixes  a dictionary of multipliers like {<span class="stringliteral">&quot;K&quot;</span>: 1024}, case-insensitive</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span><span class="stringliteral">    value, suffix = value.decode() </span><span class="keywordflow">if</span> isinstance(value, six.binary_type) <span class="keywordflow">else</span> value, <span class="keywordtype">None</span></div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>    <span class="keywordflow">if</span> suffixes:</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>        suffix = next((k <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> suffixes.items() <span class="keywordflow">if</span> value.lower().endswith(k.lower())), <span class="keywordtype">None</span>)</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>        value = value[:-len(suffix)] <span class="keywordflow">if</span> suffix <span class="keywordflow">else</span> value</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>    <span class="keywordflow">return</span> int(float(value) * (suffixes[suffix] <span class="keywordflow">if</span> suffix <span class="keywordflow">else</span> 1))</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span> </div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span> </div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span><span class="keyword">def </span>plural(word, items=None, numbers=True, single=&quot;1&quot;, sep=&quot;,&quot;, pref=&quot;&quot;, suf=&quot;&quot;):</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span><span class="stringliteral">    Returns the word </span><span class="keyword">as</span> <span class="stringliteral">&#39;count words&#39;</span>, <span class="keywordflow">or</span> <span class="stringliteral">&#39;1 word&#39;</span> <span class="keywordflow">if</span> count <span class="keywordflow">is</span> 1,</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>    <span class="keywordflow">or</span> <span class="stringliteral">&#39;words&#39;</span> <span class="keywordflow">if</span> count omitted.</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span> </div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#afe2e5b13a029be617ff18fd00319a532">  958</a></span>    <span class="preprocessor">@param</span>   items      item collection <span class="keywordflow">or</span> count,</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>                        <span class="keywordflow">or</span> <span class="keywordtype">None</span> to get just the plural of the word</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>    <span class="preprocessor">@param</span>   numbers    <span class="keywordflow">if</span> <span class="keyword">False</span>, count <span class="keywordflow">is</span> omitted <span class="keyword">from</span> final result</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>    <span class="preprocessor">@param</span>   single     prefix to use <span class="keywordflow">for</span> word <span class="keywordflow">if</span> count <span class="keywordflow">is</span> 1, e.g. <span class="stringliteral">&quot;a&quot;</span></div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>    <span class="preprocessor">@param</span>   sep        thousand-separator to use <span class="keywordflow">for</span> count</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>    <span class="preprocessor">@param</span>   pref       prefix to prepend to count, e.g. <span class="stringliteral">&quot;~150&quot;</span></div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>    <span class="preprocessor">@param</span>   suf        suffix to append to count, e.g. <span class="stringliteral">&quot;150+&quot;</span></div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span><span class="stringliteral">    count   = len(items) </span><span class="keywordflow">if</span> hasattr(items, <span class="stringliteral">&quot;__len__&quot;</span>) <span class="keywordflow">else</span> items <span class="keywordflow">or</span> 0</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>    isupper = word[-1:].isupper()</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>    suffix = <span class="stringliteral">&quot;es&quot;</span> <span class="keywordflow">if</span> word <span class="keywordflow">and</span> word[-1:].lower() <span class="keywordflow">in</span> <span class="stringliteral">&quot;xyz&quot;</span> \</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>             <span class="keywordflow">and</span> <span class="keywordflow">not</span> word[-2:].lower().endswith(<span class="stringliteral">&quot;ay&quot;</span>) \</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>             <span class="keywordflow">else</span> <span class="stringliteral">&quot;s&quot;</span> <span class="keywordflow">if</span> word <span class="keywordflow">else</span> <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>    <span class="keywordflow">if</span> isupper: suffix = suffix.upper()</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>    <span class="keywordflow">if</span> count != 1 <span class="keywordflow">and</span> <span class="stringliteral">&quot;es&quot;</span> == suffix <span class="keywordflow">and</span> <span class="stringliteral">&quot;y&quot;</span> == word[-1:].lower():</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>        word = word[:-1] + (<span class="stringliteral">&quot;I&quot;</span> <span class="keywordflow">if</span> isupper <span class="keywordflow">else</span> <span class="stringliteral">&quot;i&quot;</span>)</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>    result = word + (<span class="stringliteral">&quot;&quot;</span> <span class="keywordflow">if</span> 1 == count <span class="keywordflow">else</span> suffix)</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>    <span class="keywordflow">if</span> numbers <span class="keywordflow">and</span> items <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>        <span class="keywordflow">if</span> 1 == count: fmtcount = single</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>        <span class="keywordflow">elif</span> <span class="keywordflow">not</span> count: fmtcount = <span class="stringliteral">&quot;0&quot;</span></div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#aceda51d00ae2a27eadde5922158e831a">  978</a></span>        <span class="keywordflow">elif</span> sep: fmtcount = <span class="stringliteral">&quot;&quot;</span>.join([</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>            x + (sep <span class="keywordflow">if</span> i <span class="keywordflow">and</span> <span class="keywordflow">not</span> i % 3 <span class="keywordflow">else</span> <span class="stringliteral">&quot;&quot;</span>) <span class="keywordflow">for</span> i, x <span class="keywordflow">in</span> enumerate(str(count)[::-1])</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>        ][::-1])</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>        <span class="keywordflow">else</span>: fmtcount = str(count)</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span> </div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>        fmtcount = pref + fmtcount + suf</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>        result = <span class="stringliteral">&quot;%s %s&quot;</span> % (single <span class="keywordflow">if</span> 1 == count <span class="keywordflow">else</span> fmtcount, result)</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>    <span class="keywordflow">return</span> result.strip()</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span> </div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span> </div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span><span class="keyword">def </span><a class="code hl_function" href="namespacegrepros_1_1common.html#a7445d9642e3bca9353739e71539f626b">unique_path</a>(pathname, empty_ok=False):</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span><span class="stringliteral">    Returns a unique version of the path.</span></div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span><span class="stringliteral">    If a file </span><span class="keywordflow">or</span> directory <span class="keyword">with</span> the same name already exists, returns a unique</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>    version (e.g. <span class="stringliteral">&quot;/tmp/my.2.file&quot;</span> <span class="keywordflow">if</span> <span class="stringliteral">&quot;&quot;</span>/tmp/my.file<span class="stringliteral">&quot; already exists).</span></div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span><span class="stringliteral"></span> </div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span><span class="stringliteral">    </span><span class="preprocessor">@param</span>   empty_ok  whether to ignore existence <span class="keywordflow">if</span> file <span class="keywordflow">is</span> empty</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span><span class="stringliteral">    result = pathname</span></div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span><span class="stringliteral">    </span><span class="keywordflow">if</span> <span class="stringliteral">&quot;linux2&quot;</span> == sys.platform <span class="keywordflow">and</span> six.PY2 <span class="keywordflow">and</span> isinstance(result, six.text_type) \</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>    <span class="keywordflow">and</span> <span class="stringliteral">&quot;utf-8&quot;</span> != sys.getfilesystemencoding():</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>        result = result.encode(<span class="stringliteral">&quot;utf-8&quot;</span>) <span class="comment"># Linux has trouble if locale not UTF-8</span></div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>    <span class="keywordflow">if</span> os.path.isfile(result) <span class="keywordflow">and</span> empty_ok <span class="keywordflow">and</span> <span class="keywordflow">not</span> os.path.getsize(result):</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>        <span class="keywordflow">return</span> result <span class="keywordflow">if</span> isinstance(result, STRING_TYPES) <span class="keywordflow">else</span> str(result)</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>    path, name = os.path.split(result)</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>    base, ext = os.path.splitext(name)</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>    <span class="keywordflow">if</span> len(name) &gt; 255: <span class="comment"># Filesystem limitation</span></div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>        name = base[:255 - len(ext) - 2] + <span class="stringliteral">&quot;..&quot;</span> + ext</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>        result = os.path.join(path, name)</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>    counter = 2</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#a7445d9642e3bca9353739e71539f626b"> 1009</a></span>    <span class="keywordflow">while</span> os.path.exists(result):</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>        suffix = <span class="stringliteral">&quot;.%s%s&quot;</span> % (counter, ext)</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>        name = base + suffix</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>        <span class="keywordflow">if</span> len(name) &gt; 255:</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>            name = base[:255 - len(suffix) - 2] + <span class="stringliteral">&quot;..&quot;</span> + suffix</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>        result = os.path.join(path, name)</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>        counter += 1</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>    <span class="keywordflow">return</span> result</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span> </div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span> </div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span><span class="keyword">def </span>verify_io(f, mode):</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span><span class="stringliteral">    Returns whether stream </span><span class="keywordflow">or</span> file path can be read <span class="keyword">from</span> <span class="keywordflow">and</span>/<span class="keywordflow">or</span> written to <span class="keyword">as</span> binary.</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span> </div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>    Prints <span class="keywordflow">or</span> raises error <span class="keywordflow">if</span> <span class="keywordflow">not</span>.</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span> </div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>    Tries to open file <span class="keywordflow">in</span> append mode <span class="keywordflow">if</span> verifying path writability,</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>    auto-creating missing directories <span class="keywordflow">if</span> any, will delete any file <span class="keywordflow">or</span> directory created.</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span> </div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>    <span class="preprocessor">@param</span>   f     file path, <span class="keywordflow">or</span> stream</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>    <span class="preprocessor">@param</span>   mode  <span class="stringliteral">&quot;r&quot;</span> <span class="keywordflow">for</span> readable, <span class="stringliteral">&quot;w&quot;</span> <span class="keywordflow">for</span> writable, <span class="stringliteral">&quot;a&quot;</span> <span class="keywordflow">for</span> readable <span class="keywordflow">and</span> writable</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span><span class="stringliteral">    result, op = </span><span class="keyword">True</span>, <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>    <span class="keywordflow">if</span> <a class="code hl_function" href="namespacegrepros_1_1common.html#ab017eabe616ba9cf8397bf90beb3ac80">is_stream</a>(f):</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>            pos = f.tell()</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>            <span class="keywordflow">if</span> mode <span class="keywordflow">in</span> (<span class="stringliteral">&quot;r&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>):</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>                op = <span class="stringliteral">&quot; reading from&quot;</span></div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>                result = isinstance(f.read(1), bytes)</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>            <span class="keywordflow">if</span> result <span class="keywordflow">and</span> mode <span class="keywordflow">in</span> (<span class="stringliteral">&quot;w&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>):</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>                op = <span class="stringliteral">&quot; writing to&quot;</span></div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>                result, _ = <span class="keyword">True</span>, f.write(b<span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>            f.seek(pos)</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>            <span class="keywordflow">return</span> result</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"><a class="line" href="namespacegrepros_1_1common.html#a82587f22920f0b6d3d8c020ed47c192d"> 1043</a></span>        <span class="keywordflow">except</span> Exception <span class="keyword">as</span> e:</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>            ConsolePrinter.log(logging.ERROR, <span class="stringliteral">&quot;Error%s %s: %s&quot;</span>, op, type(f).__name__, e)</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>            <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span> </div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>    present, paths_created = os.path.exists(f), []</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> present <span class="keywordflow">and</span> mode <span class="keywordflow">in</span> (<span class="stringliteral">&quot;w&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>):</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>            op = <span class="stringliteral">&quot; writing to&quot;</span></div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>            path = os.path.realpath(os.path.dirname(f))</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>            parts, accum = [x <span class="keywordflow">for</span> x <span class="keywordflow">in</span> path.split(os.sep) <span class="keywordflow">if</span> x], []</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>            <span class="keywordflow">while</span> parts:</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>                accum.append(parts.pop(0))</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>                curpath = os.path.join(os.sep, accum[0] + os.sep, *accum[1:])  <span class="comment"># Windows drive letter thing</span></div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> os.path.exists(curpath):</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>                    os.mkdir(curpath)</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>                    paths_created.append(curpath)</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>        <span class="keywordflow">elif</span> <span class="keywordflow">not</span> present <span class="keywordflow">and</span> <span class="stringliteral">&quot;r&quot;</span> == mode:</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>            <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>        <span class="keyword">with</span> open(f, {<span class="stringliteral">&quot;r&quot;</span>: <span class="stringliteral">&quot;rb&quot;</span>, <span class="stringliteral">&quot;w&quot;</span>: <span class="stringliteral">&quot;ab&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>: <span class="stringliteral">&quot;ab+&quot;</span>}[mode]) <span class="keyword">as</span> g:</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>            <span class="keywordflow">if</span> mode <span class="keywordflow">in</span> (<span class="stringliteral">&quot;r&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>):</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>                op = <span class="stringliteral">&quot; reading from&quot;</span></div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>                result = isinstance(g.read(1), bytes)</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>            <span class="keywordflow">if</span> result <span class="keywordflow">and</span> mode <span class="keywordflow">in</span> (<span class="stringliteral">&quot;w&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>):</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>                op = <span class="stringliteral">&quot; writing to&quot;</span></div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>                result, _ = <span class="keyword">True</span>, g.write(b<span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>            <span class="keywordflow">return</span> result</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>    <span class="keywordflow">except</span> Exception <span class="keyword">as</span> e:</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>        ConsolePrinter.log(logging.ERROR, <span class="stringliteral">&quot;Error%s %s: %s&quot;</span>, f, e)</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>        <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>    <span class="keywordflow">finally</span>:</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> present:</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>            <span class="keywordflow">try</span>: os.remove(f)</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>            <span class="keywordflow">except</span> Exception: <span class="keywordflow">pass</span></div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>            <span class="keywordflow">for</span> path <span class="keywordflow">in</span> paths_created[::-1]:</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>                <span class="keywordflow">try</span>: os.rmdir(path)</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>                <span class="keywordflow">except</span> Exception: <span class="keywordflow">pass</span></div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span> </div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span> </div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span><span class="keyword">def </span><a class="code hl_function" href="namespacegrepros_1_1common.html#a7048341cc827b7dbf562ab0390897f6f">wildcard_to_regex</a>(text, end=False):</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span><span class="stringliteral">    Returns plain wildcard like &quot;foo*bar&quot;</span> <span class="keyword">as</span> re.Pattern(<span class="stringliteral">&quot;foo.*bar&quot;</span>, re.I).</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span> </div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>    <span class="preprocessor">@param</span>   end  whether pattern should match until end (adds $)</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span><span class="stringliteral">    suff = &quot;$&quot;</span> <span class="keywordflow">if</span> end <span class="keywordflow">else</span> <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>    <span class="keywordflow">return</span> re.compile(<span class="stringliteral">&quot;.*&quot;</span>.join(map(re.escape, text.split(<span class="stringliteral">&quot;*&quot;</span>))) + suff, re.I)</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span> </div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span> </div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>__all__ = [</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>    <span class="stringliteral">&quot;PATH_TYPES&quot;</span>, <span class="stringliteral">&quot;ConsolePrinter&quot;</span>, <span class="stringliteral">&quot;Decompressor&quot;</span>, <span class="stringliteral">&quot;MatchMarkers&quot;</span>, <span class="stringliteral">&quot;ProgressBar&quot;</span>, <span class="stringliteral">&quot;TextWrapper&quot;</span>,</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>    <span class="stringliteral">&quot;drop_zeros&quot;</span>, <span class="stringliteral">&quot;ellipsize&quot;</span>, <span class="stringliteral">&quot;ensure_namespace&quot;</span>, <span class="stringliteral">&quot;filter_dict&quot;</span>, <span class="stringliteral">&quot;find_files&quot;</span>,</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>    <span class="stringliteral">&quot;format_bytes&quot;</span>, <span class="stringliteral">&quot;format_stamp&quot;</span>, <span class="stringliteral">&quot;format_timedelta&quot;</span>, <span class="stringliteral">&quot;get_name&quot;</span>, <span class="stringliteral">&quot;has_arg&quot;</span>, <span class="stringliteral">&quot;import_item&quot;</span>,</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>    <span class="stringliteral">&quot;is_iterable&quot;</span>, <span class="stringliteral">&quot;is_stream&quot;</span>, <span class="stringliteral">&quot;makedirs&quot;</span>, <span class="stringliteral">&quot;memoize&quot;</span>, <span class="stringliteral">&quot;merge_dicts&quot;</span>, <span class="stringliteral">&quot;merge_spans&quot;</span>,</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>    <span class="stringliteral">&quot;parse_datetime&quot;</span>, <span class="stringliteral">&quot;parse_number&quot;</span>, <span class="stringliteral">&quot;plural&quot;</span>, <span class="stringliteral">&quot;unique_path&quot;</span>, <span class="stringliteral">&quot;verify_io&quot;</span>, <span class="stringliteral">&quot;wildcard_to_regex&quot;</span>,</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>]</div>
<div class="ttc" id="aclass_exception_html"><div class="ttname"><a href="class_exception.html">Exception</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html">grepros.common.ConsolePrinter</a></div><div class="ttdoc">Prints to console, supports color output.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00080">common.py:80</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_a00415f3a62290d9bb13c596a9ae60a94"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#a00415f3a62290d9bb13c596a9ae60a94">grepros.common.ConsolePrinter.print</a></div><div class="ttdeci">print(cls, text=&quot;&quot;, *args, **kwargs)</div><div class="ttdoc">Prints text, formatted with args and kwargs.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00179">common.py:179</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_a020554d0db454919368e7f18bee125f8"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#a020554d0db454919368e7f18bee125f8">grepros.common.ConsolePrinter.WARN_END</a></div><div class="ttdeci">WARN_END</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00091">common.py:91</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_a0517321e929ecd5c4e769a8f87eee3a4"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#a0517321e929ecd5c4e769a8f87eee3a4">grepros.common.ConsolePrinter.flush</a></div><div class="ttdeci">flush(cls)</div><div class="ttdoc">Ends current open line, if any.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00259">common.py:259</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_a061947498e8c2d601576f6e6f42fd7a0"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#a061947498e8c2d601576f6e6f42fd7a0">grepros.common.ConsolePrinter.APIMODE</a></div><div class="ttdeci">bool APIMODE</div><div class="ttdoc">Whether logging debugs and warnings and raising errors, instead of printing.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00104">common.py:104</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_a124c00710a1325937af255607ca9cc84"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#a124c00710a1325937af255607ca9cc84">grepros.common.ConsolePrinter.log</a></div><div class="ttdeci">log(cls, level, text=&quot;&quot;, *args, **kwargs)</div><div class="ttdoc">Prints text to stderr, or logs to logger if APIMODE.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00247">common.py:247</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_a21ead9564c18f7a6afd439a5660e0526"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#a21ead9564c18f7a6afd439a5660e0526">grepros.common.ConsolePrinter.WARN_START</a></div><div class="ttdeci">WARN_START</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00091">common.py:91</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_a59c3bba4b17cd5e19f149ea175fa6989"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#a59c3bba4b17cd5e19f149ea175fa6989">grepros.common.ConsolePrinter.WIDTH</a></div><div class="ttdeci">int WIDTH</div><div class="ttdoc">Console width in characters, updated from shutil and curses.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00098">common.py:98</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_a67b5708431eee5a8c4aed6350ca1dbfc"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#a67b5708431eee5a8c4aed6350ca1dbfc">grepros.common.ConsolePrinter.error</a></div><div class="ttdeci">error(cls, text=&quot;&quot;, *args, **kwargs)</div><div class="ttdoc">Prints error to stderr, formatted with args and kwargs, in error colors if supported.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00202">common.py:202</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_a69a6908a92eb926c5a76317297c34990"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#a69a6908a92eb926c5a76317297c34990">grepros.common.ConsolePrinter.init_terminal</a></div><div class="ttdeci">init_terminal(cls)</div><div class="ttdoc">Initializes terminal for color output, or disables color output if unsupported.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00142">common.py:142</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_a6a2898a82918f046e95c384f0a302d93"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#a6a2898a82918f046e95c384f0a302d93">grepros.common.ConsolePrinter.debug</a></div><div class="ttdeci">debug(cls, text=&quot;&quot;, *args, **kwargs)</div><div class="ttdoc">Prints debug text to stderr, or logs to logger if APIMODE.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00230">common.py:230</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_a6fb8f7d0264e65add27c66547a3c5419"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#a6fb8f7d0264e65add27c66547a3c5419">grepros.common.ConsolePrinter.APIMODE</a></div><div class="ttdeci">APIMODE</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00132">common.py:132</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_a70034fa7a4a0f7912242988a590a85cb"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#a70034fa7a4a0f7912242988a590a85cb">grepros.common.ConsolePrinter.DEBUG_END</a></div><div class="ttdeci">DEBUG_END</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00090">common.py:90</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_a76a791c70caa47f85044264f1468131a"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#a76a791c70caa47f85044264f1468131a">grepros.common.ConsolePrinter.WIDTH</a></div><div class="ttdeci">WIDTH</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00146">common.py:146</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_a80879433c00d805bd7a5e734d0eda64f"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#a80879433c00d805bd7a5e734d0eda64f">grepros.common.ConsolePrinter.STYLE_LOWLIGHT</a></div><div class="ttdeci">str STYLE_LOWLIGHT</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00084">common.py:84</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_a8762b19cf14909c797ff5a53c2231a2b"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#a8762b19cf14909c797ff5a53c2231a2b">grepros.common.ConsolePrinter.configure</a></div><div class="ttdeci">configure(cls, color=True, apimode=False)</div><div class="ttdoc">Initializes printer, for terminal output or library mode.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00131">common.py:131</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_a9bd93596caa75c86e7fa423f02ab1a6c"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#a9bd93596caa75c86e7fa423f02ab1a6c">grepros.common.ConsolePrinter.DEBUG_START</a></div><div class="ttdeci">DEBUG_START</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00090">common.py:90</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_ab070f2ed5116c63d583953d2358733bc"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#ab070f2ed5116c63d583953d2358733bc">grepros.common.ConsolePrinter.PRINTS</a></div><div class="ttdeci">dict PRINTS</div><div class="ttdoc">{sys.stdout: number of texts printed, sys.stderr: ..}</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00101">common.py:101</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_ab9d36912fe65b0eb00cc00c96d4a0e85"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#ab9d36912fe65b0eb00cc00c96d4a0e85">grepros.common.ConsolePrinter.STYLE_RESET</a></div><div class="ttdeci">str STYLE_RESET</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00082">common.py:82</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_ac2fb90faceda1d8dfe3713c829d37cd7"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#ac2fb90faceda1d8dfe3713c829d37cd7">grepros.common.ConsolePrinter.warn</a></div><div class="ttdeci">warn(cls, text=&quot;&quot;, *args, **kwargs)</div><div class="ttdoc">Prints warning to stderr, or logs to logger if APIMODE.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00215">common.py:215</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_adaa6ad01d1fa3ac83ba828b283f1264b"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#adaa6ad01d1fa3ac83ba828b283f1264b">grepros.common.ConsolePrinter.STYLE_ERROR</a></div><div class="ttdeci">str STYLE_ERROR</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00088">common.py:88</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_adadd930a96f7396162da394dd8c0afe5"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#adadd930a96f7396162da394dd8c0afe5">grepros.common.ConsolePrinter.ERROR_START</a></div><div class="ttdeci">ERROR_START</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00092">common.py:92</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_adcc3aebd8951a12f172e00c5ade27498"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#adcc3aebd8951a12f172e00c5ade27498">grepros.common.ConsolePrinter.STYLE_WARN</a></div><div class="ttdeci">str STYLE_WARN</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00087">common.py:87</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_aeffdcb40de1409c8869d68032c86b904"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#aeffdcb40de1409c8869d68032c86b904">grepros.common.ConsolePrinter.ERROR_END</a></div><div class="ttdeci">ERROR_END</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00092">common.py:92</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_console_printer_html_af90824509586333cf45ce757d2711ce3"><div class="ttname"><a href="classgrepros_1_1common_1_1_console_printer.html#af90824509586333cf45ce757d2711ce3">grepros.common.ConsolePrinter.COLOR</a></div><div class="ttdeci">COLOR</div><div class="ttdoc">Whether using colors in output.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00095">common.py:95</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_decompressor_html"><div class="ttname"><a href="classgrepros_1_1common_1_1_decompressor.html">grepros.common.Decompressor</a></div><div class="ttdoc">Decompresses zstandard archives.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00288">common.py:288</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_decompressor_html_a0cfcbc1743b700cc433dd5d3f8d44db0"><div class="ttname"><a href="classgrepros_1_1common_1_1_decompressor.html#a0cfcbc1743b700cc433dd5d3f8d44db0">grepros.common.Decompressor.decompress</a></div><div class="ttdeci">decompress(cls, path, progress=False)</div><div class="ttdoc">Decompresses file to same directory, showing optional progress bar.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00304">common.py:304</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_decompressor_html_a4e86856299d41afaf3b0e4f4e433fe4f"><div class="ttname"><a href="classgrepros_1_1common_1_1_decompressor.html#a4e86856299d41afaf3b0e4f4e433fe4f">grepros.common.Decompressor.is_compressed</a></div><div class="ttdeci">is_compressed(cls, path)</div><div class="ttdoc">Returns whether file is a recognized archive.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00333">common.py:333</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_decompressor_html_aa8ae2dd4843b1f85cfcc4350c52dc934"><div class="ttname"><a href="classgrepros_1_1common_1_1_decompressor.html#aa8ae2dd4843b1f85cfcc4350c52dc934">grepros.common.Decompressor.make_decompressed_name</a></div><div class="ttdeci">make_decompressed_name(cls, path)</div><div class="ttdoc">Returns the path without archive extension, if any.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00345">common.py:345</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_decompressor_html_ab5417f324cfda877a9061d192ef90b49"><div class="ttname"><a href="classgrepros_1_1common_1_1_decompressor.html#ab5417f324cfda877a9061d192ef90b49">grepros.common.Decompressor.validate</a></div><div class="ttdeci">validate(cls)</div><div class="ttdoc">Raises error if decompression library not available.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00351">common.py:351</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_decompressor_html_ad2788c37d3aed499aa410f6d17e2f4b9"><div class="ttname"><a href="classgrepros_1_1common_1_1_decompressor.html#ad2788c37d3aed499aa410f6d17e2f4b9">grepros.common.Decompressor.EXTENSIONS</a></div><div class="ttdeci">tuple EXTENSIONS</div><div class="ttdoc">Supported archive extensions.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00292">common.py:292</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_decompressor_html_adaa355ae6afede1c40ec9ad35775d21d"><div class="ttname"><a href="classgrepros_1_1common_1_1_decompressor.html#adaa355ae6afede1c40ec9ad35775d21d">grepros.common.Decompressor.ZSTD_MAGIC</a></div><div class="ttdeci">str ZSTD_MAGIC</div><div class="ttdoc">zstd file header magic start bytes</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00295">common.py:295</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_len_iterable_html"><div class="ttname"><a href="classgrepros_1_1common_1_1_len_iterable.html">grepros.common.LenIterable</a></div><div class="ttdoc">Wrapper for iterable value with specified fixed length.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00472">common.py:472</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_len_iterable_html_a3d1374cfb30c05eeeb049c2197b5a824"><div class="ttname"><a href="classgrepros_1_1common_1_1_len_iterable.html#a3d1374cfb30c05eeeb049c2197b5a824">grepros.common.LenIterable.__iter__</a></div><div class="ttdeci">__iter__(self)</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00484">common.py:484</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_len_iterable_html_a6781b036ba1c606be31ad87a0d530414"><div class="ttname"><a href="classgrepros_1_1common_1_1_len_iterable.html#a6781b036ba1c606be31ad87a0d530414">grepros.common.LenIterable.__len__</a></div><div class="ttdeci">__len__(self)</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00488">common.py:488</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_len_iterable_html_ae337de78ff4cc433441141564577ac65"><div class="ttname"><a href="classgrepros_1_1common_1_1_len_iterable.html#ae337de78ff4cc433441141564577ac65">grepros.common.LenIterable.__init__</a></div><div class="ttdeci">__init__(self, iterable, count)</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00480">common.py:480</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_match_markers_html_a094c367727273b4da2b960ca3b3edc06"><div class="ttname"><a href="classgrepros_1_1common_1_1_match_markers.html#a094c367727273b4da2b960ca3b3edc06">grepros.common.MatchMarkers.ID</a></div><div class="ttdeci">ID</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00067">common.py:67</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_match_markers_html_a1de54bd922161dd5c6a353647f448fd6"><div class="ttname"><a href="classgrepros_1_1common_1_1_match_markers.html#a1de54bd922161dd5c6a353647f448fd6">grepros.common.MatchMarkers.END</a></div><div class="ttdeci">END</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00069">common.py:69</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_match_markers_html_a35f48ceb7c93c466ded66a98c2e4e425"><div class="ttname"><a href="classgrepros_1_1common_1_1_match_markers.html#a35f48ceb7c93c466ded66a98c2e4e425">grepros.common.MatchMarkers.populate</a></div><div class="ttdeci">populate(cls, value)</div><div class="ttdoc">Populates highlight markers with specified value.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00065">common.py:65</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_match_markers_html_a3b63cffef80bfd731814abe0721cf0e7"><div class="ttname"><a href="classgrepros_1_1common_1_1_match_markers.html#a3b63cffef80bfd731814abe0721cf0e7">grepros.common.MatchMarkers.EMPTY_REPL</a></div><div class="ttdeci">str EMPTY_REPL</div><div class="ttdoc">Replacement for empty string match.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00062">common.py:62</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_match_markers_html_a648c23d4531ddc629af00dc755579355"><div class="ttname"><a href="classgrepros_1_1common_1_1_match_markers.html#a648c23d4531ddc629af00dc755579355">grepros.common.MatchMarkers.END</a></div><div class="ttdeci">str END</div><div class="ttdoc">Placeholder at end of match.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00058">common.py:58</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_match_markers_html_a787b7e288ebd1289629ef4c83517ee39"><div class="ttname"><a href="classgrepros_1_1common_1_1_match_markers.html#a787b7e288ebd1289629ef4c83517ee39">grepros.common.MatchMarkers.EMPTY_REPL</a></div><div class="ttdeci">EMPTY_REPL</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00071">common.py:71</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_match_markers_html_a9d6ae4aa12ba127d1ad814275261b73a"><div class="ttname"><a href="classgrepros_1_1common_1_1_match_markers.html#a9d6ae4aa12ba127d1ad814275261b73a">grepros.common.MatchMarkers.START</a></div><div class="ttdeci">str START</div><div class="ttdoc">Placeholder in front of match.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00056">common.py:56</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_match_markers_html_aa03ec9e8f97678078b4d437c64e3fb5b"><div class="ttname"><a href="classgrepros_1_1common_1_1_match_markers.html#aa03ec9e8f97678078b4d437c64e3fb5b">grepros.common.MatchMarkers.ID</a></div><div class="ttdeci">str ID</div><div class="ttdoc">Unique marker for match highlight replacements.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00054">common.py:54</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_match_markers_html_ac169e9ffa53b0e66f7f30d192d44643f"><div class="ttname"><a href="classgrepros_1_1common_1_1_match_markers.html#ac169e9ffa53b0e66f7f30d192d44643f">grepros.common.MatchMarkers.START</a></div><div class="ttdeci">START</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00068">common.py:68</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_match_markers_html_ac9e0e727bf7b731b564e00f4bddf25af"><div class="ttname"><a href="classgrepros_1_1common_1_1_match_markers.html#ac9e0e727bf7b731b564e00f4bddf25af">grepros.common.MatchMarkers.EMPTY</a></div><div class="ttdeci">EMPTY</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00070">common.py:70</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_match_markers_html_afa50c7300879b68f4210f64860a5d7ac"><div class="ttname"><a href="classgrepros_1_1common_1_1_match_markers.html#afa50c7300879b68f4210f64860a5d7ac">grepros.common.MatchMarkers.EMPTY</a></div><div class="ttdeci">str EMPTY</div><div class="ttdoc">Placeholder for empty string match.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00060">common.py:60</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_progress_bar_html"><div class="ttname"><a href="classgrepros_1_1common_1_1_progress_bar.html">grepros.common.ProgressBar</a></div><div class="ttdoc">A simple ASCII progress bar with a ticker thread.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00365">common.py:365</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_progress_bar_html_a08060e0924949738f75a0cdd8b49cef4"><div class="ttname"><a href="classgrepros_1_1common_1_1_progress_bar.html#a08060e0924949738f75a0cdd8b49cef4">grepros.common.ProgressBar.run</a></div><div class="ttdeci">run(self)</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00460">common.py:460</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_progress_bar_html_a091f7df486118d289ff74433dcabb887"><div class="ttname"><a href="classgrepros_1_1common_1_1_progress_bar.html#a091f7df486118d289ff74433dcabb887">grepros.common.ProgressBar.foreword</a></div><div class="ttdeci">foreword</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00434">common.py:434</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_progress_bar_html_a0b94b95d3fec21c5af220d2d571e38d2"><div class="ttname"><a href="classgrepros_1_1common_1_1_progress_bar.html#a0b94b95d3fec21c5af220d2d571e38d2">grepros.common.ProgressBar.update</a></div><div class="ttdeci">update(self, value=None, draw=True, flush=False)</div><div class="ttdoc">Updates the progress bar value, and refreshes by default; returns self.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00402">common.py:402</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_progress_bar_html_a1702ac8242f004352282d0e43bcedaea"><div class="ttname"><a href="classgrepros_1_1common_1_1_progress_bar.html#a1702ac8242f004352282d0e43bcedaea">grepros.common.ProgressBar.printbar</a></div><div class="ttdeci">printbar</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00397">common.py:397</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_progress_bar_html_a174e692bc1b62677e7b4d611ed06b109"><div class="ttname"><a href="classgrepros_1_1common_1_1_progress_bar.html#a174e692bc1b62677e7b4d611ed06b109">grepros.common.ProgressBar.percent</a></div><div class="ttdeci">percent</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00389">common.py:389</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_progress_bar_html_a226a7c3cb3ea364762c6c52ac7057fe4"><div class="ttname"><a href="classgrepros_1_1common_1_1_progress_bar.html#a226a7c3cb3ea364762c6c52ac7057fe4">grepros.common.ProgressBar.__init__</a></div><div class="ttdeci">__init__(self, max=100, value=0, min=0, width=30, forechar=&quot;-&quot;, backchar=&quot; &quot;, foreword=&quot;&quot;, afterword=&quot;&quot;, interval=1, pulse=False, aftertemplate=&quot; {afterword}&quot;)</div><div class="ttdoc">Creates a new progress bar, without drawing it yet.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00382">common.py:384</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_progress_bar_html_a2f39781a0bb89a6705efdc8d4c527def"><div class="ttname"><a href="classgrepros_1_1common_1_1_progress_bar.html#a2f39781a0bb89a6705efdc8d4c527def">grepros.common.ProgressBar.stop</a></div><div class="ttdeci">stop(self)</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00467">common.py:467</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_progress_bar_html_a3157929ebdfa37155e3e4a6b46720272"><div class="ttname"><a href="classgrepros_1_1common_1_1_progress_bar.html#a3157929ebdfa37155e3e4a6b46720272">grepros.common.ProgressBar.draw</a></div><div class="ttdeci">draw(self, flush=False)</div><div class="ttdoc">Prints the progress bar, from the beginning of the current line.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00452">common.py:452</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_progress_bar_html_a4299f0f984e2afbd4fcd4db6c744fdb5"><div class="ttname"><a href="classgrepros_1_1common_1_1_progress_bar.html#a4299f0f984e2afbd4fcd4db6c744fdb5">grepros.common.ProgressBar.progresschar</a></div><div class="ttdeci">progresschar</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00398">common.py:398</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_progress_bar_html_a5426824942db4253f87a1009fd5d2d4f"><div class="ttname"><a href="classgrepros_1_1common_1_1_progress_bar.html#a5426824942db4253f87a1009fd5d2d4f">grepros.common.ProgressBar.bar</a></div><div class="ttdeci">bar</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00393">common.py:393</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_progress_bar_html_a56336262068f0a007b1dec71901be1ff"><div class="ttname"><a href="classgrepros_1_1common_1_1_progress_bar.html#a56336262068f0a007b1dec71901be1ff">grepros.common.ProgressBar.daemon</a></div><div class="ttdeci">daemon</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00388">common.py:388</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_progress_bar_html_a943af1103d1f1365d6c7f31b331119bf"><div class="ttname"><a href="classgrepros_1_1common_1_1_progress_bar.html#a943af1103d1f1365d6c7f31b331119bf">grepros.common.ProgressBar.interval</a></div><div class="ttdeci">interval</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00464">common.py:464</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_progress_bar_html_a9c17a624c873883e9fccc9debdb1c10f"><div class="ttname"><a href="classgrepros_1_1common_1_1_progress_bar.html#a9c17a624c873883e9fccc9debdb1c10f">grepros.common.ProgressBar.pulse_pos</a></div><div class="ttdeci">pulse_pos</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00392">common.py:392</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_progress_bar_html_ae2dc0f1c541d7886d07e3e3d7f11b643"><div class="ttname"><a href="classgrepros_1_1common_1_1_progress_bar.html#ae2dc0f1c541d7886d07e3e3d7f11b643">grepros.common.ProgressBar.is_running</a></div><div class="ttdeci">is_running</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00399">common.py:399</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_progress_bar_html_afcc7a4b78ecd8fa7e713f8cfa0f51017"><div class="ttname"><a href="classgrepros_1_1common_1_1_progress_bar.html#afcc7a4b78ecd8fa7e713f8cfa0f51017">grepros.common.ProgressBar.value</a></div><div class="ttdeci">value</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00390">common.py:390</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_progress_bar_html_afd7d49e17b69bd6bf3d7a649856c1067"><div class="ttname"><a href="classgrepros_1_1common_1_1_progress_bar.html#afd7d49e17b69bd6bf3d7a649856c1067">grepros.common.ProgressBar.pause</a></div><div class="ttdeci">pause</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00391">common.py:391</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_text_wrapper_html"><div class="ttname"><a href="classgrepros_1_1common_1_1_text_wrapper.html">grepros.common.TextWrapper</a></div><div class="ttdoc">TextWrapper that supports custom substring widths in line width calculation.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00498">common.py:498</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_text_wrapper_html_a081090be3d428541490bb48323877653"><div class="ttname"><a href="classgrepros_1_1common_1_1_text_wrapper.html#a081090be3d428541490bb48323877653">grepros.common.TextWrapper.realwidth</a></div><div class="ttdeci">realwidth</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00534">common.py:534</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_text_wrapper_html_a146beaa715edc2d5a95859b066a631aa"><div class="ttname"><a href="classgrepros_1_1common_1_1_text_wrapper.html#a146beaa715edc2d5a95859b066a631aa">grepros.common.TextWrapper.customs</a></div><div class="ttdeci">customs</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00527">common.py:527</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_text_wrapper_html_a167f3d1d219cdeb0285ec26cc28c2275"><div class="ttname"><a href="classgrepros_1_1common_1_1_text_wrapper.html#a167f3d1d219cdeb0285ec26cc28c2275">grepros.common.TextWrapper.disabled</a></div><div class="ttdeci">disabled</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00530">common.py:530</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_text_wrapper_html_a3f0d44e708e1dd2905c55926eb782465"><div class="ttname"><a href="classgrepros_1_1common_1_1_text_wrapper.html#a3f0d44e708e1dd2905c55926eb782465">grepros.common.TextWrapper.break_long_words</a></div><div class="ttdeci">break_long_words</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00521">common.py:521</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_text_wrapper_html_a4951d21c8292a682f6d249ff375bdeb5"><div class="ttname"><a href="classgrepros_1_1common_1_1_text_wrapper.html#a4951d21c8292a682f6d249ff375bdeb5">grepros.common.TextWrapper.drop_whitespace</a></div><div class="ttdeci">drop_whitespace</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00522">common.py:522</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_text_wrapper_html_a4cf37c7679844282ea497b709b878f30"><div class="ttname"><a href="classgrepros_1_1common_1_1_text_wrapper.html#a4cf37c7679844282ea497b709b878f30">grepros.common.TextWrapper.strip</a></div><div class="ttdeci">strip(self, v)</div><div class="ttdoc">Returns string with custom substrings and whitespace stripped.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00571">common.py:571</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_text_wrapper_html_a5078c1241ccc4cc24738f5def56dd962"><div class="ttname"><a href="classgrepros_1_1common_1_1_text_wrapper.html#a5078c1241ccc4cc24738f5def56dd962">grepros.common.TextWrapper.wrap</a></div><div class="ttdeci">wrap(self, text)</div><div class="ttdoc">Returns a list of wrapped text lines, without linebreaks.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00537">common.py:537</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_text_wrapper_html_a5558ace5433f9aabbf0a0ec059900d94"><div class="ttname"><a href="classgrepros_1_1common_1_1_text_wrapper.html#a5558ace5433f9aabbf0a0ec059900d94">grepros.common.TextWrapper.width</a></div><div class="ttdeci">width</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00519">common.py:519</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_text_wrapper_html_a6513377ac92c85d46df28191e8b123b6"><div class="ttname"><a href="classgrepros_1_1common_1_1_text_wrapper.html#a6513377ac92c85d46df28191e8b123b6">grepros.common.TextWrapper.subsequent_indent</a></div><div class="ttdeci">subsequent_indent</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00520">common.py:520</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_text_wrapper_html_a74302178e52e1de799f3424ebe2a6d82"><div class="ttname"><a href="classgrepros_1_1common_1_1_text_wrapper.html#a74302178e52e1de799f3424ebe2a6d82">grepros.common.TextWrapper.LENCACHEMAX</a></div><div class="ttdeci">int LENCACHEMAX</div><div class="ttdoc">Max length of strlen cache.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00504">common.py:504</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_text_wrapper_html_a815024d0c2db3754f20d8f1caebb45df"><div class="ttname"><a href="classgrepros_1_1common_1_1_text_wrapper.html#a815024d0c2db3754f20d8f1caebb45df">grepros.common.TextWrapper.custom_rgx</a></div><div class="ttdeci">custom_rgx</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00529">common.py:529</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_text_wrapper_html_a84685ed0862a8dcda5f320f131464797"><div class="ttname"><a href="classgrepros_1_1common_1_1_text_wrapper.html#a84685ed0862a8dcda5f320f131464797">grepros.common.TextWrapper.minwidth</a></div><div class="ttdeci">minwidth</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00531">common.py:531</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_text_wrapper_html_a9cbef4155d23d53861bfb64cee75a86b"><div class="ttname"><a href="classgrepros_1_1common_1_1_text_wrapper.html#a9cbef4155d23d53861bfb64cee75a86b">grepros.common.TextWrapper.reserve_width</a></div><div class="ttdeci">reserve_width(self, reserved=&quot;&quot;)</div><div class="ttdoc">Decreases the configured width by given amount (number or string).</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00558">common.py:558</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_text_wrapper_html_a9e28a1714da334e04573f51ae2bbd8bb"><div class="ttname"><a href="classgrepros_1_1common_1_1_text_wrapper.html#a9e28a1714da334e04573f51ae2bbd8bb">grepros.common.TextWrapper.max_lines</a></div><div class="ttdeci">max_lines</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00523">common.py:523</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_text_wrapper_html_aa6a15ee24d54eae658b86b0257188f91"><div class="ttname"><a href="classgrepros_1_1common_1_1_text_wrapper.html#aa6a15ee24d54eae658b86b0257188f91">grepros.common.TextWrapper.custom_lens</a></div><div class="ttdeci">custom_lens</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00528">common.py:528</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_text_wrapper_html_ab73271f70effbb97663154a50a24ff00"><div class="ttname"><a href="classgrepros_1_1common_1_1_text_wrapper.html#ab73271f70effbb97663154a50a24ff00">grepros.common.TextWrapper.placeholder</a></div><div class="ttdeci">placeholder</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00524">common.py:524</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_text_wrapper_html_ad2a4bbf0c950ca89e157c4d235120a8e"><div class="ttname"><a href="classgrepros_1_1common_1_1_text_wrapper.html#ad2a4bbf0c950ca89e157c4d235120a8e">grepros.common.TextWrapper.lencache</a></div><div class="ttdeci">lencache</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00526">common.py:526</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_text_wrapper_html_ad9fa472611d581ffb1d3dd22f0f9c7ff"><div class="ttname"><a href="classgrepros_1_1common_1_1_text_wrapper.html#ad9fa472611d581ffb1d3dd22f0f9c7ff">grepros.common.TextWrapper.SPACE_RGX</a></div><div class="ttdeci">SPACE_RGX</div><div class="ttdoc">Regex for breaking text at whitespace.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00501">common.py:501</a></div></div>
<div class="ttc" id="aclassgrepros_1_1common_1_1_text_wrapper_html_ae084efa20d64215bed791e83ccc61b73"><div class="ttname"><a href="classgrepros_1_1common_1_1_text_wrapper.html#ae084efa20d64215bed791e83ccc61b73">grepros.common.TextWrapper.strlen</a></div><div class="ttdeci">strlen(self, v)</div><div class="ttdoc">Returns length of string, using custom substring widths.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00564">common.py:564</a></div></div>
<div class="ttc" id="anamespacegrepros_1_1common_html_a3216ef32e864455856ca733bd0f1ab14"><div class="ttname"><a href="namespacegrepros_1_1common.html#a3216ef32e864455856ca733bd0f1ab14">grepros.common.format_stamp</a></div><div class="ttdeci">format_stamp(stamp)</div><div class="ttdoc">Returns ISO datetime from UNIX timestamp.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00806">common.py:806</a></div></div>
<div class="ttc" id="anamespacegrepros_1_1common_html_a3fab58da26eb9906b58541ac244d6783"><div class="ttname"><a href="namespacegrepros_1_1common.html#a3fab58da26eb9906b58541ac244d6783">grepros.common.is_iterable</a></div><div class="ttdeci">is_iterable(value)</div><div class="ttdoc">Returns whether value is iterable.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00857">common.py:857</a></div></div>
<div class="ttc" id="anamespacegrepros_1_1common_html_a7048341cc827b7dbf562ab0390897f6f"><div class="ttname"><a href="namespacegrepros_1_1common.html#a7048341cc827b7dbf562ab0390897f6f">grepros.common.wildcard_to_regex</a></div><div class="ttdeci">wildcard_to_regex(text, end=False)</div><div class="ttdoc">Returns plain wildcard like &quot;foo*bar&quot; as re.Pattern(&quot;foo.*bar&quot;, re.I).</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l01099">common.py:1099</a></div></div>
<div class="ttc" id="anamespacegrepros_1_1common_html_a73267537ca6dba825de9bde0bd9d8c3a"><div class="ttname"><a href="namespacegrepros_1_1common.html#a73267537ca6dba825de9bde0bd9d8c3a">grepros.common.merge_spans</a></div><div class="ttdeci">merge_spans(spans, join_blanks=False)</div><div class="ttdoc">Returns a sorted list of (start, end) spans with overlapping spans merged.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00922">common.py:922</a></div></div>
<div class="ttc" id="anamespacegrepros_1_1common_html_a7445d9642e3bca9353739e71539f626b"><div class="ttname"><a href="namespacegrepros_1_1common.html#a7445d9642e3bca9353739e71539f626b">grepros.common.unique_path</a></div><div class="ttdeci">unique_path(pathname, empty_ok=False)</div><div class="ttdoc">Returns a unique version of the path.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l01009">common.py:1009</a></div></div>
<div class="ttc" id="anamespacegrepros_1_1common_html_ab017eabe616ba9cf8397bf90beb3ac80"><div class="ttname"><a href="namespacegrepros_1_1common.html#ab017eabe616ba9cf8397bf90beb3ac80">grepros.common.is_stream</a></div><div class="ttdeci">is_stream(value)</div><div class="ttdoc">Returns whether value is a file-like object.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00864">common.py:864</a></div></div>
<div class="ttc" id="anamespacegrepros_1_1common_html_aba660430d1140332d72be50f6faae9fc"><div class="ttname"><a href="namespacegrepros_1_1common.html#aba660430d1140332d72be50f6faae9fc">grepros.common.has_arg</a></div><div class="ttdeci">has_arg(func, name)</div><div class="ttdoc">Returns whether function supports taking specified argument by name.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00831">common.py:831</a></div></div>
<div class="ttc" id="anamespacegrepros_1_1common_html_ac3c0d706b2076ef82e2f264a8152a986"><div class="ttname"><a href="namespacegrepros_1_1common.html#ac3c0d706b2076ef82e2f264a8152a986">grepros.common.filter_dict</a></div><div class="ttdeci">filter_dict(dct, keys=(), values=(), reverse=False)</div><div class="ttdoc">Filters string dictionary by keys and values, supporting * wildcards.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00711">common.py:711</a></div></div>
<div class="ttc" id="anamespacegrepros_1_1common_html_accdaf5e86a6940d40e2a40c2f3960232"><div class="ttname"><a href="namespacegrepros_1_1common.html#accdaf5e86a6940d40e2a40c2f3960232">grepros.common.format_timedelta</a></div><div class="ttdeci">format_timedelta(delta)</div><div class="ttdoc">Formats the datetime.timedelta as &quot;3d 40h 23min 23.1sec&quot;.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00782">common.py:782</a></div></div>
<div class="ttc" id="anamespacegrepros_1_1common_html_ae332d1619b0f13555033ede3949a543d"><div class="ttname"><a href="namespacegrepros_1_1common.html#ae332d1619b0f13555033ede3949a543d">grepros.common.find_files</a></div><div class="ttdeci">find_files(names=(), paths=(), extensions=(), skip_extensions=(), recurse=False)</div><div class="ttdoc">Yields filenames from current directory or given paths.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00742">common.py:742</a></div></div>
<div class="ttc" id="anamespacegrepros_1_1common_html_af5a6a12387662fdeff37db8fd6235131"><div class="ttname"><a href="namespacegrepros_1_1common.html#af5a6a12387662fdeff37db8fd6235131">grepros.common.structcopy</a></div><div class="ttdeci">structcopy(value)</div><div class="ttdoc">Returns a deep copy of a standard data structure (dict, list, set, tuple), other object types reused ...</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00884">common.py:884</a></div></div>
<div class="ttc" id="anamespacegrepros_1_1common_html_afe2e5b13a029be617ff18fd00319a532"><div class="ttname"><a href="namespacegrepros_1_1common.html#afe2e5b13a029be617ff18fd00319a532">grepros.common.parse_number</a></div><div class="ttdeci">parse_number(value, suffixes=None)</div><div class="ttdoc">Returns an integer parsed from text, raises on error.</div><div class="ttdef"><b>Definition</b> <a href="common_8py_source.html#l00958">common.py:958</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_0d8d2c83378af3dbf8497b689631bb64.html">grepros</a></li><li class="navelem"><a class="el" href="common_8py.html">common.py</a></li>
    <li class="footer">Generated on Wed Jan 3 2024 20:00:45 for grepros by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
